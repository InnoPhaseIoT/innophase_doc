<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ATCMDLIB Application &mdash; InnoPhase 1.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js "></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="../../_static/js/custom.js" defer></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            InnoPhase
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">ATCMDLIB Application</a><ul>
<li><a class="reference internal" href="#include-atcmdlib-header-file">Include ATCMDLIB Header File</a></li>
<li><a class="reference internal" href="#initialization">Initialization</a></li>
<li><a class="reference internal" href="#add-sample-command-function">Add Sample Command Function</a></li>
<li><a class="reference internal" href="#add-new-command">Add New Command</a></li>
<li><a class="reference internal" href="#command-status">Command Status</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-the-application">Running the Application</a></li>
<li><a class="reference internal" href="#expected-output">Expected Output</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">InnoPhase</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">ATCMDLIB Application</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/6. Applications/2. Examples/Example_using_Custom_ATCMDLIB.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>ATCMDS application provides the Wi-Fi capability to any device having
UART interface. Host CPU uses serial commands to interface and configure
the Wi-Fi module. All AT or custom commands are parsed and converted to
the corresponding WLAN/Network calls. This mode returns the responses in
the same ASCII format as success or failure with additional response
data.</p>
<p>ATCMDLIB enables customers to use all standard commands in the library
(libstcmd.a). Custom commands can also be added and linked to the
ATCMDLIB.</p>
<section id="atcmdlib-application">
<h1>ATCMDLIB Application<a class="headerlink" href="#atcmdlib-application" title="Link to this heading"></a></h1>
<p>This section describes the application along with code snippets. The
application uses ATCMDLIB APIs to achieve functionality.</p>
<section id="include-atcmdlib-header-file">
<h2>Include ATCMDLIB Header File<a class="headerlink" href="#include-atcmdlib-header-file" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>#include “atcmd_lib.h”</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="initialization">
<h2>Initialization<a class="headerlink" href="#initialization" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>if(ATCMDLIB_ SUCCESS == atcmd_init()){</p>
<p>os_printf(“ATCMDLIB: Ready\n”);</p>
<p>}</p>
<p>else {</p>
<p>os_printf(“ATCMDLIB: Failed\n”);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="add-sample-command-function">
<h2>Add Sample Command Function<a class="headerlink" href="#add-sample-command-function" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>int testcmd_func(int argc , char *argv[])</p>
<p>{</p>
<p>int i;</p>
<p>os_printf(”\r\nHello”);</p>
<p>for(i = 0 ; i &lt;argc;i++){</p>
<p>os_printf(”\r\nargv[%d]=%s”,i,argv[i]);</p>
<p>}</p>
<p>return ATCMDLIB_SUCCESS;</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="add-new-command">
<h2>Add New Command<a class="headerlink" href="#add-new-command" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>if(ATCMDLIB_ERROR == atcmd_add(“testcmd”,&amp;testcmd_func))</p>
<p>os_printf(“Failed to add command\n”);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="command-status">
<h2>Command Status<a class="headerlink" href="#command-status" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/*use this enum to send command status*/</p>
<p>typedef enum ATCMDLIB_STATUS</p>
<p>{</p>
<p>ATCMDLIB_SUCCESS =0,</p>
<p>ATCMDLIB_ERROR = 1,</p>
<p>ATCMDLIB_EINVAL = 2</p>
<p>};</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="running-the-application">
<h1>Running the Application<a class="headerlink" href="#running-the-application" title="Link to this heading"></a></h1>
<p>Program at_custom_cmd.elf
<em>(freertos_sdk_x.y\examples\at_custom_cmd\bin)</em> using the Download
Tool:</p>
<ol class="arabic simple">
<li><p>Launch the Download tool provided with InnoPhase Talaria TWO SDK.</p></li>
<li><p>In the GUI window:</p>
<ol class="loweralpha simple">
<li><p>Boot Target: Select the appropriate EVK from the drop-down</p></li>
<li><p>ELF Input: Load the at_custom_cmd.elf by clicking on Select ELF
File.</p></li>
<li><p>Programming: Prog RAM or Prog Flash as per requirement.</p></li>
</ol>
</li>
</ol>
<p>For more details on using the Download tool, refer to the document:
UG_Download_Tool.pdf (path:
<em>freertos_sdk_x.y/pc_tools/Download_Tool/doc</em>).</p>
<p><strong>Note</strong>: x and y refer to the SDK release version. For example:
freertos_sdk_2.4/doc.</p>
</section>
<section id="expected-output">
<h1>Expected Output<a class="headerlink" href="#expected-output" title="Link to this heading"></a></h1>
<p>The previously mentioned code will add an example command testcmd. The
expected output for this command will be console pint Hello followed by
arguments present in command. The code also sends OK on UART as command
status, upon successful execution of the command testcmd.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PWWWWWAE</p>
<p>Build $Id: git-b8e2cc1 $</p>
<p>Flash detected. flash.hw.uuid: 39483937-3207-00a8-0068-ffffffffffff</p>
<p>$App:git-c5c0b68</p>
<p>SDK Ver: FREERTOS_SDK_1.0</p>
<p>At Custom Command Demo App</p>
<p>addr e0:69:3a:00:2c:5e</p>
<p>domain:1-11&#64;20before: magic1=0x0, val=0x0, magic2=0x0</p>
<p>Crash detection logic initialized</p>
<p>after: magic1=0x11223344, val=0x0, magic2=0x55667788</p>
<p>ATCMDLIB: Ready</p>
<p>cmd:&lt;null&gt;</p>
<p>Added cmd [argc=0:name=testcmd]</p>
<p>starting thread-sock</p>
<p>CMD:atHexdump of uartbuf before processing, len=3</p>
<p>61 74 00 | at.</p>
<p>Zero arguments</p>
<p>cmd:at:2</p>
<p>Ready</p>
<p>resp-len:9</p>
<p>CMD:testcmdHexdump of uartbuf before processing, len=8</p>
<p>74 65 73 74 63 6D 64 00 | testcmd.</p>
<p>Zero arguments</p>
<p>cmd:testcmd:7</p>
<p>No arguments</p>
<p>Hello</p>
<p>resp-len:9</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Use any serial commands terminal to issue serial interface commands,
like testcmd in this example, to Talaria TWO EVB.</p>
<p>Open minicom on a Ubuntu terminal using the command minicom -s with
115,200 baudrate, 8 bits, no flow control, and no parity once the
at_custom_cmd.elf is loaded on to the Talaria TWO EVB.</p>
<p><a class="reference internal" href="../../_images/image1103.png"><img alt="image1" src="../../_images/image1103.png" style="width: 1.16667in; height: 0.21667in;" /></a><a class="reference internal" href="../../_images/image266.png"><img alt="image2" src="../../_images/image266.png" style="width: 7.08661in; height: 2.56528in;" /></a></p>
<p>Figure : Minicom output</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 InnoPhase IoT, Inc. | All Rights Reserved | Proprietary &amp; Confidential.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>