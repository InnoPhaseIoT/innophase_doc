<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; InnoPhase 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js "></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="../_static/js/custom.js" defer></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            InnoPhase
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Getting_Started_Landing_page.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Hardware-Reference.html">Hardware-Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Porting-Guide.html">Porting-Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Software_Reference/Prerequisites/libusbK_driver-Zadig.html">Software Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Development_Environments/Development_Environments.html">Development Environments</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Tools/Tools_Landing.html">Tools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Applications-Landing_Page.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Regulatory%20Notices/Regulatory%20Notices.html">Regulatory Notice</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Security/Security%20-%20Landing%20Page.html">Security</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Backend%20Files%20-%20for%20cross%20referencing/Backend%20File%20Landing.html">Backend Files - for cross referencing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">InnoPhase</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Applications/BLE 5_0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h1>
<p>This document introduces the reader to some of the BLE APIs available in
the SDK through a code sample consisting of a server and a client
application.</p>
<p>It covers the usage of:</p>
<ol class="arabic simple">
<li><p>Setting up advertising and connection modes</p></li>
<li><p>Creating services and its characteristic</p></li>
<li><p>Assigning UUID to them and handling their access</p></li>
</ol>
</section>
<section id="topology">
<h1>Topology<a class="headerlink" href="#topology" title="Permalink to this heading"></a></h1>
<p><a class="reference internal" href="../_images/image1.png"><img alt="Diagram Description automatically generated" src="../_images/image1.png" style="width: 5.90551in; height: 2.17949in;" /></a></p>
<p>Figure : Using BLE – Topology</p>
</section>
<section id="bt-protocol-stack-structure-apis-event-mechanism">
<h1>BT Protocol Stack Structure, APIs &amp; Event Mechanism<a class="headerlink" href="#bt-protocol-stack-structure-apis-event-mechanism" title="Permalink to this heading"></a></h1>
<p>SDK’s Bluetooth Protocol stack consists of two parts:</p>
<ol class="arabic simple">
<li><p>Controller Stack – manages PHY layer, baseband, link controller, link
manager, device manager, HCI and other modules used for hardware
interface and link management.</p></li>
<li><p>Host Stack – consists of L2CAP, SMP, SDP, GAP, ATT, GATT and various
profiles.</p></li>
</ol>
<p>Host Stack provides the API interface to the application programmer,
through which application layer can access all the features of Bluetooth
System.</p>
<p>GAP (Generic Access Profile) defines the discovery, device management
and device connection management between BLE devices. GAP APIs provide
the way to configure advertising and connection parameters.</p>
<p>ATT (Attribute Protocol) defines attribute protocol for discovering,
reading, and writing attributes in a peer device. Attributes are where
data resides and they consist of a handle, a type, a value, and
permission.</p>
<p>GATT (Generic Attribute Profile) describes a service framework using the
ATT protocol for discovering services and for reading and writing
characteristic values and their descriptors on a peer device.</p>
<p>GATT APIs provide a way to achieve this by creating services and
characteristics, discovering them, and reading descriptors, or
requesting for a notification from GATT server.</p>
<p>Once these APIs are called, status of the devices at various states is
obtained by events pushed from the stack through the callback functions
provided. These callbacks are used for even-handling.</p>
<p>The applications functionality is defined by the way it is programmed to
react to these events. For example, by defining what happens next when
another device tries to connect and reads or writes some parameters.</p>
</section>
<section id="roles-of-server-client">
<h1>Roles of Server &amp; Client<a class="headerlink" href="#roles-of-server-client" title="Permalink to this heading"></a></h1>
<p>In BLE terminology, the server acts as a GATT server, a GAP peripheral,
and is a slave device. The client acts as a GATT client, a GAP central,
and is a master device. The terms server and client are used throughout
this document to refer to these roles.</p>
<p>The device in the central role scans, looking for advertisement, and the
device in the peripheral role makes the advertisement.</p>
<p>Once they establish connection, what the two devices talk to each other
is determined by GATT Server’s and GATT Client’s implementation.</p>
</section>
<section id="list-of-apis">
<h1>List of APIs<a class="headerlink" href="#list-of-apis" title="Permalink to this heading"></a></h1>
<ol class="arabic simple">
<li><p>bt_gap_init()- Initializes the GAP service. This API must be called
before using any of the other functions in the GAP interface.</p></li>
<li><p>bt_gatt_create_service_128()- Creates a service declaration from a
128-bits UUID.</p></li>
<li><p>bt_gatt_add_char_128()- Adds a 128-bits UUID characteristic to a
created service.</p></li>
<li><p>bt_gatt_add_service()- Adds (a created) service to the local server
list.</p></li>
<li><p>bt_gap_addr_set()- Sets address for given address type.</p></li>
<li><p>bt_gap_cfg_ext_set() - Configures extended advertising mode.</p></li>
<li><p>bt_gap_set_adv_data() - Sets advertising data for advertising.</p></li>
<li><p>bt_gap_discoverable_mode()- Sets device in discoverable mode.</p></li>
<li><p>bt_gap_set_adv_data()- Sets advertising data for legacy advertising</p></li>
<li><p>bt_gap_server_link_add()- Adds a GATT server to the gap connection.</p></li>
<li><p>bt_gap_server_link_remove()- Removes GATT server from the gap
connection.</p></li>
<li><p>bt_gap_cfg_conn_set()- Configures connection.</p></li>
<li><p>bt_gap_connection_mode()- Sets device in connecting mode.</p></li>
<li><p>bt_gap_connectable_mode()-Sets device in connectable mode</p></li>
<li><p>bt_gap_client_link_add()- Adds a GATT client to the gap connection.</p></li>
<li><p>bt_gatt_discover_characteristics_by_uuid()- Discovers
characteristics by UUID.</p></li>
<li><p>bt_gatt_exchange_mtu()- Sets and exchanges MTU size for reception.</p></li>
<li><p>bt_gatt_read_characteristic_value()- Reads characteristic value.</p></li>
<li><p>bt_gatt_add_char_128()- Adds a 128-bits UUID characteristic to a
created service</p></li>
<li><p>bt_gap_authenticate()- Authenticates connected link.</p></li>
<li><p>bt_gap_cfg_adv_set()- Configures advertisement.</p></li>
<li><p>bt_smp_passkey_set()- Sets the passkey for the link.</p></li>
<li><p>bt_smp_cfg_set()- Sets bt_smp_cfg_t value to the current setting
SMP.</p></li>
</ol>
</section>
<section id="server-application">
<h1>Server Application<a class="headerlink" href="#server-application" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The sample code in the path examples\using_ble\src\ble_server.c
implements a server called InnoServer. It creates and starts a custom
GATT service with a single read-only characteristic. Each time the
characteristic is read by a client, the read returns a different
character string from a set of strings present on the server.</p>
<p>In addition to the custom service, the server also makes use of common
server functionality provided by the BLE API. Specifically, this adds
the Generic Access, Generic Attribute, and Device Information services
to the server.</p>
</section>
<section id="code-walkthrough">
<h2>Code Walkthrough<a class="headerlink" href="#code-walkthrough" title="Permalink to this heading"></a></h2>
<p><strong>Note</strong>: All the applicable ELFs are available in the following
location of the SDK release package: sdk_x.y\examples\using_ble\bin.</p>
<p>x and y in sdk_x.y refer to the SDK release version. For example:
<em>sdk_2.4\examples\using_ble\bin</em>.</p>
<section id="initialization">
<h3>Initialization<a class="headerlink" href="#initialization" title="Permalink to this heading"></a></h3>
<p>The server starts by initializing the GAP Service:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gap_init();</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The GAP API must be called before using any of the other functions in
the Bluetooth GAP interface. It returns zero on success, non-zero
otherwise.</p>
</section>
<section id="adding-common-server-functionality">
<h3>Adding Common Server Functionality<a class="headerlink" href="#adding-common-server-functionality" title="Permalink to this heading"></a></h3>
<p>The server uses the API to add common server functionality:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void common_server_create(char *name, uint16_t appearance, char
*manufacturer_name);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>This adds the Generic Access, Generic Attribute, and Device Information
services to our server. The server is given the name InnoServer with a
manufacturer name of Innophase IoT.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>common_server_create(“InnoServer”, 0, “Innophase IoT”);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="adding-custom-service-characteristic">
<h3>Adding Custom Service &amp; Characteristic<a class="headerlink" href="#adding-custom-service-characteristic" title="Permalink to this heading"></a></h3>
<p>The server’s custom service and characteristic are implemented in the
custom_server_create function:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>static void custom_server_create(void)</p>
<p>{</p>
<p>srv.cust_service = bt_gatt_create_service_128(UUID_CUSTOM_SERVICE);</p>
<p>bt_gatt_add_char_128(srv.cust_service, UUID_CUSTOM_CHARACTERISTIC,
char_access_cb, GATT_PERM_READ, GATT_CHAR_PROP_BIT_READ);</p>
<p>bt_gatt_add_service(srv.cust_service);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The bt_gatt_create_service_128 function creates a GATT service with a
128-bit UUID.</p>
<p>bt_gatt_add_char_128 is used to add a characteristic with a 128-bit UUID
to a service. A callback function char_access_cb is provided and will be
called when the characteristic is accessed. Properties and permissions
for the characteristic are also specified; in this case, the
characteristic is read-only.</p>
<p>Finally, bt_gatt_add_service adds the service to our server.</p>
</section>
<section id="starting-the-server">
<h3>Starting the Server<a class="headerlink" href="#starting-the-server" title="Permalink to this heading"></a></h3>
<p>Once the server’s services and characteristics are set up, it is started
in the start_server function:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>static void start_server(void)</p>
<p>{ bt_gap_cfg_adv_t bt_handle;</p>
<p>/* Configure advertisement */</p>
<p>    bt_handle.fast_period = 10240;</p>
<p>    bt_handle.slow_period = 0;</p>
<p>    bt_handle.fast_interval = 160;</p>
<p>    bt_handle.slow_interval = 1600;</p>
<p>    bt_handle.tx_power = 0;</p>
<p>   bt_handle.channel_map = 0;</p>
<p>    bt_gap_cfg_adv_set(&amp;bt_handle);</p>
<p>    /* Set our BLE address */</p>
<p>    bt_gap_addr_set(bt_hci_addr_type_random, SERVER_ADDR);</p>
<p>    if (adv_mode != 0) {</p>
<p>        os_printf(“Extended_ADV_mode \n”);</p>
<p>        bt_gap_cfg_ext_t ext;</p>
<p>        /*configure extended advertisement*/</p>
<p>        ext.use = 2;</p>
<p>        ext.adv_pri_phy = 1; /*adv_pri_phy*/</p>
<p>        if(adv_sec_phy != 0)</p>
<p>            ext.adv_sec_phy = 2; /*adv_sec_phy LE 2 Mbps*/</p>
<p>        else</p>
<p>            ext.adv_sec_phy = 1; /*adv_sec_phy LE 1 Mbps*/</p>
<p>        ext.adv_sid = 1; /*adv_sid*/</p>
<p>        ext.conn_phy = 1; /*conn_phy*/</p>
<p>        ext.conn_len = 251; /*conn_len*/</p>
<p>        bt_gap_cfg_ext_set(&amp;ext);</p>
<p>        if(adv_sec_phy != 0){</p>
<p>            os_printf(“Extended ADV payload len = %d \n”,
adv_length_2);</p>
<p>            bt_gap_set_adv_data(adv_length_2, adv_buf_2); /*Set
advertising data*/</p>
<p>        } else {</p>
<p>            os_printf(“Extended ADV payload len = %d \n”,
adv_length_1);</p>
<p>            bt_gap_set_adv_data(adv_length_1, adv_buf_1); /*Set
advertising data*/</p>
<p>} }</p>
<p>    /* Make server connectable (will enable advertisement) */</p>
<p>bt_gap_discoverable_mode(GAP_DISCOVERABLE_MODE_GENERAL,
bt_hci_addr_type_random, 0,address_zero, &amp;gap_ops);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Here bt_gap_cfg_adv sets parameters for advertisement.
bt_gap_set_adv_data sets the advertisement data. bt_gap_addr_set sets
our BLE address and address type; the sample server uses a random
address that does not change.</p>
<p>bt_gap_cfg_ext_set() configures the extended advertisement, while
bt_gap_set_adv_data() sets advertising data for advertising.</p>
<p>bt_gap_connectable_mode makes the device connectable and will enable
advertisement.</p>
</section>
<section id="connection-disconnection-callbacks">
<h3>Connection/Disconnection Callbacks<a class="headerlink" href="#connection-disconnection-callbacks" title="Permalink to this heading"></a></h3>
<p>At this point of execution, the server is advertising and ready to
receive a connection from the client. When the client connects, the
callback function connected_cb will be called. In the callback, the GATT
server needs to be linked to this GAP connection with the following
function call:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>srv.gatt_link = bt_gap_server_link_add(param-&gt;handle);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The code sample shows how to obtain the argument required for this
function call from the argument provided to the callback by casting
hci_event with bt_hci_evt_le_conn_cmpl_t and fetching its handle.</p>
<p>Similarly, the link is removed in disconnected_cb, which is the callback
function that is called when the client disconnects:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gap_server_link_remove(srv.gatt_link);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="characteristic-access-callback">
<h3>Characteristic Access Callback<a class="headerlink" href="#characteristic-access-callback" title="Permalink to this heading"></a></h3>
<p>While the client is connected to the server, it can read the custom
characteristic. This results in the callback function associated with
the characteristic being called. In this case, it is char_access_cb. In
the sample, this function chooses a string to send to the client as a
read response. The length argument specifies the space available in the
data array to store the read response. This is dependent on the MTU size
used for the connection. The data to send is set in the data array and
the length argument is updated to the amount of data set in the array:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>chars_to_copy = min((size_t)*length, strlen(SERVER_QUOTES[rsp_idx]));</p>
<p>memcpy(data, SERVER_QUOTES[rsp_idx], chars_to_copy);</p>
<p>*length = chars_to_copy;</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Note: The string’s null terminator is not included in the read response.</p>
</section>
</section>
<section id="running-the-application">
<h2>Running the Application<a class="headerlink" href="#running-the-application" title="Permalink to this heading"></a></h2>
<p>Program ble_server.elf (sdk_x.y\examples\using_wifi\bin) using the
Download tool(sdk_x.y\pc_tools\Download_Tool)provided with InnoPhase
Talaria TWO SDK.</p>
<ol class="arabic simple">
<li><p>Launch the Download tool.</p></li>
<li><p>In the GUI window:</p>
<ol class="loweralpha simple">
<li><p>Boot Target: Select the appropriate EVK from the drop-down</p></li>
<li><p>ELF Input: Load the ble_server.elf by clicking on Select ELF File.</p></li>
<li><p>Boot Arguments: Pass the following boot arguments to select the
advertising mode and adv_sec_phy secondary PHY.</p></li>
</ol>
</li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>BLE5_adv_mode=&lt;0/1&gt; BLE5_adv_sec_phy=&lt;0/1&gt;</p>
<p>BLE5_adv_mode=0 =&gt; Advertising mode is Legacy</p>
<p>BLE5_adv_mode=1 =&gt; Advertising mode is Extended</p>
<p>BLE5_adv_sec_phy=0 =&gt; adv_sec_phy Secondary PHY is LE 1Mbps</p>
<p>BLE5_adv_sec_phy=1 =&gt; adv_sec_phy Secondary PHY is LE 2Mbps</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<ol class="loweralpha simple" start="4">
<li><p>Programming: Prog RAM or Prog Flash as per requirement.</p></li>
</ol>
<p>For more details on using the Download tool, refer to the document:
UG_Download_Tool.pdf (path: <em>sdk_x.y\pc_tools\Download_Tool\doc</em>).</p>
<p><strong>Note</strong>: x and y refer to the SDK release version.</p>
<p>For example: sdk_2.4/doc.</p>
</section>
<section id="expected-output">
<h2>Expected Output<a class="headerlink" href="#expected-output" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWWAEBuild $Id: git-a88e30570 $</p>
<p>BLE5_adv_mode=1 BLE5_adv_sec_phy=0</p>
<p>$App:git-37cab6b4</p>
<p>SDK Ver: SDK_2.6.3alpha</p>
<p>Ble Server Demo App</p>
<p>Extended_ADV_mode</p>
<p>Extended ADV payload len = 245</p>
<p>InnoServer started</p>
<p>[0.823,544] BT connect[0]: ia:75:20:12:19:81:0f aa:05:04:03:02:01:00
phy2:0/0 phyC:00</p>
<p>Client connected</p>
<p>InnoServer: Hello from InnoServer</p>
<p>InnoServer: You can do anything, but not everything.</p>
<p>InnoServer: The richest man is not he who has the most, but he who
needs the least.</p>
<p>InnoServer: You miss 100 percent of the shots you never take.</p>
<p>InnoServer: Courage is not the absence of fear, but rather the
judgment that something else is more important than fear.</p>
<p>InnoServer: You must be the change you wish to see in the world.</p>
<p>InnoServer: To the man who only has a hammer, everything he
encounters begins to look like a nail.</p>
<p>InnoServer: A wise man gets more use from his enemies than a fool
from his friends.</p>
<p>InnoServer: The real voyage of discovery consists not in seeking new
lands but seeing with new eyes.</p>
<p>InnoServer: Even if you’re on the right track, you’ll get run over if
you just sit there.</p>
<p>InnoServer: People often say that motivation doesn’t last.
Well,neither does bathing – thats why we recommend it daily.</p>
<p>InnoServer: Believe those who are seeking the truth. Doubt those who
find it.</p>
<p>InnoServer: It is the mark of an educated mind to be able to
entertain a thought without accepting it.</p>
<p>InnoServer: I’d rather live with a good question than a bad answer.</p>
<p>InnoServer: We learn something every day, and lots of times its that
what we learned the day before was wrong.</p>
<p>InnoServer: I have made this letter longer than usual because I lack
the time to make it shorter.</p>
<p>InnoServer: Don’t ever wrestle with a pig. You’ll both get dirty, but
the pig will enjoy it.</p>
<p>InnoServer: An inventor is simply a fellow who doesn’t take his
education too seriously.</p>
<p>InnoServer: Never be afraid to laugh at yourself, after all, you
could be missing out on the joke of the century.</p>
<p>InnoServer: I am patient with stupidity but not with those who are
proud of it.</p>
<p>InnoServer: The cure for boredom is curiosity. There is no cure for
curiosity.</p>
<p>InnoServer: Advice is what we ask for when we already know the answer
but wish we didn’t.</p>
<p>InnoServer: Some people like my advice so much that they frame it
upon the wall instead of using it.</p>
<p>InnoServer: The trouble with the rat race is that even if you
win,you’re still a rat.</p>
<p>InnoServer: Imagination was given to man to compensate him for what
he is not,and a sense of humor was provided to console him for what
he is.</p>
<p>InnoServer: When a person can no longer laugh at himself, it is time
for others to laugh at him.</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="client-application">
<h1>Client Application<a class="headerlink" href="#client-application" title="Permalink to this heading"></a></h1>
<section id="overview-1">
<span id="id1"></span><h2>Overview<a class="headerlink" href="#overview-1" title="Permalink to this heading"></a></h2>
<p>The sample code in examples/using_ble/src/ble_client.c implements a
client called InnoClient which is intended to work with InnoServer. The
client scans for and connects to the server based on the server’s BLE
address (fixed at compile-time).</p>
<p>Once connected, the client tries to discover the custom GATT service and
characteristic present on the server. After this is accomplished, the
client reads the custom characteristic on the server several times and
prints out the string that it receives to the console.</p>
</section>
<section id="code-walkthrough-1">
<span id="id2"></span><h2>Code Walkthrough<a class="headerlink" href="#code-walkthrough-1" title="Permalink to this heading"></a></h2>
<section id="initialization-1">
<span id="id3"></span><h3>Initialization<a class="headerlink" href="#initialization-1" title="Permalink to this heading"></a></h3>
<p>Like the server, the client must also initialize the GAP Service before
calling other functions in the GAP interface:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gap_init();</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="scanning">
<h3>Scanning<a class="headerlink" href="#scanning" title="Permalink to this heading"></a></h3>
<p>The function scan_and_connect implements functionality of scanning for
and connecting to the server.</p>
<p>This function makes use of the following API calls to start the scan:
bt_gap_cfg_scan_t</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gap_error_t scan_and_connect(void)</p>
<p>{</p>
<p>bt_gap_cfg_scan_t bt_scan_handle;</p>
<p>bt_gap_cfg_conn_t bt_conn_handle;</p>
<p>bt_gap_error_t result_gap = GAP_ERROR_SUCCESS;</p>
<p>os_printf(“InnoServer address: %6pMR\n”, inno_server_conn.ble_addr);</p>
<p>/* Scan for server */</p>
<p>bt_scan_handle.period = SCAN_PERIOD;</p>
<p>bt_scan_handle.interval = SCAN_INT;</p>
<p>bt_scan_handle.window = SCAN_WIN;</p>
<p>bt_scan_handle.background_interval = SCAN_INT;</p>
<p>bt_scan_handle.background_window = SCAN_WIN;</p>
<p>bt_scan_handle.filter_duplicates = 1;</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>bt_gap_discovery_mode puts the device into discovery mode. A pointer to
a gap_opts_t instance is supplied to specify relevant callback
functions; this is how the example specifies that the
device_discovery_event function should be called when a new BLE device
is discovered during scan:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gap_discovery_mode(GAP_DISCOVERY_MODE_GENERAL,
bt_hci_addr_type_random, addr_type_zero, address_zero, &amp;gap_ops);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>In the device_discovery_event function, the client determines whether
the identified device is the InnoServer based on a comparison of BLE
addresses. If so, a copy of the server’s advertising report is saved and
the main thread executing scan_and_connect is notified to turn off
discovery and proceed with connection.</p>
</section>
<section id="connecting">
<h3>Connecting<a class="headerlink" href="#connecting" title="Permalink to this heading"></a></h3>
<p>The client connects to the server using the following API calls:
bt_gap_cfg_conn_set</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Configure connection */</p>
<p>bt_conn_handle.interval = CONN_INTERVAL;</p>
<p>bt_conn_handle.latency = CONN_LATENCY;</p>
<p>bt_conn_handle.timeout = CONN_TIMEOUT;</p>
<p>bt_conn_handle.params_int_min = 0;</p>
<p>bt_conn_handle.params_int_max = CONN_PARAMS_INT_MIN;</p>
<p>bt_conn_handle.params_reject = CONN_PARAMS_INT_MAX;</p>
<p>bt_gap_cfg_conn_set(&amp;bt_conn_handle);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>bt_gap_connection_mode puts the device into connecting mode. The client
passes the server’s BLE address and address type to this function, along
with a pointer to an instance of gap_opts_t. This GAP options struct
instance specifies the callback functions that will be called when the
connection is established or a disconnect occurs.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gap_connection_mode(GAP_CONNECTION_MODE_DIRECT,
bt_hci_addr_type_random,inno_s
erver_conn.adv_report-&gt;addr_type,inno_server_conn.ble_addr,&amp;gap_ops);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>In the sample, the connected_event function will be called when the
connection to the server is established. A connection handle is
available from the argument to the connected callback. In
connected_event, this handle is saved and the main thread executing
scan_and_connect is notified that the connection has been established.
The following API call is then made to associate the GATT client with
the connection:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>inno_server_conn.gatt_link =
bt_gap_client_link_add(inno_server_conn.conn_handle);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="service-discovery">
<h3>Service Discovery<a class="headerlink" href="#service-discovery" title="Permalink to this heading"></a></h3>
<p>The function discover_services implements functionality for discovering
the custom service and characteristic on the server. The results of
discovery are handles:</p>
<ol class="arabic simple">
<li><p>Service is identified by a start handle and an end handle</p></li>
<li><p>Characteristic is identified by a single handle</p></li>
</ol>
<p>Since the UUID of the service is known beforehand,
bt_gatt_discover_primary_service_by_service_uuid is used to identify the
service on the server:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gatt_discover_primary_service_by_service_uuid(</p>
<p>inno_server_conn.gatt_link,</p>
<p>inno_server_conn.service.uuid,</p>
<p>&amp;service_discovery_event);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The service_discovery_event function is supplied as a callback to record
the start handle and end handle of the service.</p>
<p>Similarly, bt_gatt_discover_characteristics_by_uuid is used to identify
the custom characteristic of the custom service on the server:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gatt_discover_characteristics_by_uuid(</p>
<p>inno_server_conn.gatt_link,</p>
<p>inno_server_conn.service.start_handle,</p>
<p>inno_server_conn.service.end_handle,</p>
<p>inno_server_conn.service.characteristic.uuid,</p>
<p>&amp;characteristic_discovery_event);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The start and end handles of the service are required for this function
call. The function characteristic_discovery_event is supplied as a
callback which records the handle of the characteristic.</p>
</section>
<section id="exchanging-mtu-size">
<h3>Exchanging MTU Size<a class="headerlink" href="#exchanging-mtu-size" title="Permalink to this heading"></a></h3>
<p>The client exchanges MTU sizes with the server. This allows for an
increase in the amount of payload data that can be sent in each BLE
packet. The following API call is used to exchange MTU size:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gatt_exchange_mtu(inno_server_conn.gatt_link, size,
mtu_set_event);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The mtu_set_event function is supplied as a callback and is called when
the MTU size has been exchanged.</p>
</section>
<section id="reading-the-characteristic">
<h3>Reading the Characteristic<a class="headerlink" href="#reading-the-characteristic" title="Permalink to this heading"></a></h3>
<p>With the connection to the server established and the handle of the
characteristic identified, the client can read the value of the custom
characteristic on the server. This is accomplished with the following
API call:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gatt_read_characteristic_value(</p>
<p>inno_server_conn.gatt_link,</p>
<p>inno_server_conn.service.characteristic.handle,</p>
<p>rxbuf,</p>
<p>&amp;data_read_event);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>A pointer to a data buffer, rxbuf, is supplied. This buffer will be
filled with the data read. The supplied callback, data_read_event, will
be called when the read is complete. In this sample, the received data
is printed to the console from within the callback. The size argument to
the callback function indicates the amount of data received, and the
data argument provides a pointer to the data buffer.</p>
</section>
</section>
<section id="running-the-application-1">
<span id="id4"></span><h2>Running the Application<a class="headerlink" href="#running-the-application-1" title="Permalink to this heading"></a></h2>
<p>For ble_client, there is a need for two Talaria TWO boards, with
ble_server.elf running on one and ble_client.elf on the other.</p>
<p>Program the ELFs onto Talaria TWO boards using the Download tool (refer
to steps in section 6.3 for programming the ELFs onto Talaria TWO).</p>
</section>
<section id="expected-output-1">
<span id="id5"></span><h2>Expected Output<a class="headerlink" href="#expected-output-1" title="Permalink to this heading"></a></h2>
<p>Console output - ble_server.elf</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-65f6c1f46 $</p>
<p>$App:git-e3ccdc7a</p>
<p>SDK Ver: sdk_2.4</p>
<p>Ble Server Demo App</p>
<p>InnoServer started</p>
<p>[8.854,189] BT connect[0]: ia:58:1c:49:db:14:8e aa:05:04:03:02:01:00
phy2:0/0 phyC:00</p>
<p>Client connected</p>
<p>InnoServer: Hello from InnoServer</p>
<p>InnoServer: You can do anything, but not everything.</p>
<p>InnoServer: The richest man is not he who has the most, but he who
needs the least.</p>
<p>InnoServer: You miss 100 percent of the shots you never take.</p>
<p>InnoServer: Courage is not the absence of fear, but rather the
judgment that something else is more important than fear.</p>
<p>InnoServer: You must be the change you wish to see in the world.</p>
<p>InnoServer: To the man who only has a hammer, everything he
encounters begins to look like a nail.</p>
<p>InnoServer: A wise man gets more use from his enemies than a fool
from his friends.</p>
<p>InnoServer: The real voyage of discovery consists not in seeking new
lands but seeing with new eyes.</p>
<p>InnoServer: Even if you’re on the right track, you’ll get run over if
you just sit there.</p>
<p>InnoServer: People often say that motivation doesn’t last.
Well,neither does bathing – thats why we recommend it daily.</p>
<p>InnoServer: Believe those who are seeking the truth. Doubt those who
find it.</p>
<p>InnoServer: It is the mark of an educated mind to be able to
entertain a thought without accepting it.</p>
<p>InnoServer: I’d rather live with a good question than a bad answer.</p>
<p>InnoServer: We learn something every day, and lots of times its that
what we learned the day before was wrong.</p>
<p>InnoServer: I have made this letter longer than usual because I lack
the time to make it shorter.</p>
<p>InnoServer: Don’t ever wrestle with a pig. You’ll both get dirty, but
the pig will enjoy it.</p>
<p>InnoServer: An inventor is simply a fellow who doesn’t take his
education too seriously.</p>
<p>InnoServer: Never be afraid to laugh at yourself, after all, you
could be missing out on the joke of the century.</p>
<p>InnoServer: I am patient with stupidity but not with those who are
proud of it.</p>
<p>InnoServer: The cure for boredom is curiosity. There is no cure for
curiosity.</p>
<p>InnoServer: Advice is what we ask for when we already know the answer
but wish we didn’t.</p>
<p>InnoServer: Some people like my advice so much that they frame it
upon the wall instead of using it.</p>
<p>InnoServer: The trouble with the rat race is that even if you
win,you’re still a rat.</p>
<p>InnoServer: Imagination was given to man to compensate him for what
he is not,and a sense of humor was provided to console him for what
he is.</p>
<p>InnoServer: When a person can no longer laugh at himself, it is time
for others to laugh at him.</p>
<p>[33.064,574] BT disconnect[0]: st8</p>
<p>Client disconnected</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Console output - ble_client.elf</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-65f6c1f46 $</p>
<p>$App:git-e3ccdc7a</p>
<p>SDK Ver: sdk_2.4</p>
<p>Ble Client Demo App</p>
<p>InnoClient started</p>
<p>InnoServer address: 05:04:03:02:01:00</p>
<p>Scanning for InnoServer…</p>
<p>Discovered: 05:04:03:02:01:00 (InnoServer)</p>
<p>InnoServer 05:04:03:02:01:00 discovered!</p>
<p>Attempting to connect to InnoServer…</p>
<p>[1.278,267] BT connect[0]: ia:4f:ab:42:a5:b1:e7 aa:05:04:03:02:01:00
phy2:0/0 phyC:00</p>
<p>Connected to InnoServer!</p>
<p>Starting service discovery…</p>
<p>InnoServer custom service discovered!</p>
<p>InnoServer custom characteristic discovered!</p>
<p>Exchanging mtu size…</p>
<p>InnoServer says: Hello from InnoServer</p>
<p>InnoServer says: You can do anything, but not everything.</p>
<p>InnoServer says: The richest man is not he who has the most, but he
who needs the least.</p>
<p>InnoServer says: You miss 100 percent of the shots you never take.</p>
<p>InnoServer says: Courage is not the absence of fear, but rather the
judgment that something else is more important than fear.</p>
<p>InnoServer says: You must be the change you wish to see in the world.</p>
<p>InnoServer says: To the man who only has a hammer, everything he
encounters begins to look like a nail.</p>
<p>InnoServer says: A wise man gets more use from his enemies than a
fool from his friends.</p>
<p>InnoServer says: The real voyage of discovery consists not in seeking
new lands but seeing with new eyes.</p>
<p>InnoServer says: Even if you’re on the right track, you’ll get run
over if you just sit there.</p>
<p>InnoServer says: People often say that motivation doesn’t last.
Well,neither does bathing – that’s why we recommend it daily.</p>
<p>InnoServer says: Believe those who are seeking the truth. Doubt those
who find it.</p>
<p>InnoServer says: It is the mark of an educated mind to be able to
entertain a thought without accepting it.</p>
<p>InnoServer says: I’d rather live with a good question than a bad
answer.</p>
<p>InnoServer says: We learn something every day, and lots of times it’s
that what we learned the day before was wrong.</p>
<p>InnoServer says: I have made this letter longer than usual because I
lack the time to make it shorter.</p>
<p>InnoServer says: Don’t ever wrestle with a pig. You’ll both get
dirty, but the pig will enjoy it.</p>
<p>InnoServer says: An inventor is simply a fellow who doesn’t take his
education too seriously.</p>
<p>InnoServer says: Never be afraid to laugh at yourself, after all, you
could be missing out on the joke of the century.</p>
<p>InnoServer says: I am patient with stupidity but not with those who
are proud of it.</p>
<p>InnoServer says: The cure for boredom is curiosity. There is no cure
for curiosity.</p>
<p>InnoServer says: Advice is what we ask for when we already know the
answer but wish we didn’t.</p>
<p>InnoServer says: Some people like my advice so much that they frame
it upon the wall instead of using it.</p>
<p>InnoServer says: The trouble with the rat race is that even if you
win,you’re still a rat.</p>
<p>InnoServer says: Imagination was given to man to compensate him for
what he is not,and a sense of humor was provided to console him for
what he is.</p>
<p>InnoServer says: When a person can no longer laugh at himself, it is
time for others to laugh at him.</p>
<p>InnoClient shutting down…</p>
<p>InnoClient stopped</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="mobile-application-and-ble-server-elf">
<h2>Mobile Application and ble_server.elf<a class="headerlink" href="#mobile-application-and-ble-server-elf" title="Permalink to this heading"></a></h2>
<p>If the mobile application is used with BLE scanner app, it serves as a
client and ble_server.elf is loaded on Talaria TWO, the following output
is printed on the console:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-65f6c1f46 $</p>
<p>$App:git-e3ccdc7a</p>
<p>SDK Ver: sdk_2.4</p>
<p>Ble Server Demo App</p>
<p>InnoServer started</p>
<p>[5.349,848] BT connect[0]: ia:5b:6b:19:93:5d:31 aa:05:04:03:02:01:00
phy2:0/0 phyC:00</p>
<p>Client connected</p>
<p>InnoServer: Hello from InnoServer</p>
<p>InnoServer: You can do anything, but not everything.</p>
<p>InnoServer: The richest man is not he who has the most, but he who
needs the least.</p>
<p>InnoServer: You miss 100 percent of the shots you never take.</p>
<p>InnoServer: Courage is not the absence of fear, but rather the
judgment that something else is more important than fear.</p>
<p>InnoServer: You must be the change you wish to see in the world.</p>
<p>InnoServer: To the man who only has a hammer, everything he
encounters begins to look like a nail.</p>
<p>InnoServer: A wise man gets more use from his enemies than a fool
from his friends.</p>
<p>InnoServer: The real voyage of discovery consists not in seeking new
lands but seeing with new eyes.</p>
<p>InnoServer: Even if you’re on the right track, you’ll get run over if
you just sit there.</p>
<p>InnoServer: People often say that motivation doesn’t last.
Well,neither does bathing – thats why we recommend it daily.</p>
<p>InnoServer: Believe those who are seeking the truth. Doubt those who
find it.</p>
<p>InnoServer: It is the mark of an educated mind to be able to
entertain a thought without accepting it.</p>
<p>InnoServer: I’d rather live with a good question than a bad answer.</p>
<p>InnoServer: We learn something every day, and lots of times its that
what we learned the day before was wrong.</p>
<p>InnoServer: I have made this letter longer than usual because I lack
the time to make it shorter.</p>
<p>InnoServer: Don’t ever wrestle with a pig. You’ll both get dirty, but
the pig will enjoy it.</p>
<p>InnoServer: An inventor is simply a fellow who doesn’t take his
education too seriously.</p>
<p>InnoServer: Never be afraid to laugh at yourself, after all, you
could be missing out on the joke of the century.</p>
<p>InnoServer: I am patient with stupidity but not with those who are
proud of it.</p>
<p>InnoServer: The cure for boredom is curiosity. There is no cure for
curiosity.</p>
<p>InnoServer: Advice is what we ask for when we already know the answer
but wish we didn’t.</p>
<p>InnoServer: Some people like my advice so much that they frame it
upon the wall instead of using it.</p>
<p>InnoServer: The trouble with the rat race is that even if you
win,you’re still a rat.</p>
<p>InnoServer: Imagination was given to man to compensate him for what
he is not,and a sense of humor was provided to console him for what
he is.</p>
<p>InnoServer: When a person can no longer laugh at himself, it is time
for others to laugh at him.</p>
<p>[151.533,040] BT disconnect[0]: st13</p>
<p>Client disconnected</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Following are the screenshots from the mobile application:</p>
<p><a class="reference internal" href="../_images/image21.png"><img alt="image1" src="../_images/image21.png" style="width: 3.14961in; height: 6.2023in;" /></a></p>
<p>Figure Android application as BLE Client, Discovering InnoServer</p>
<p>BLE 1M Advertisement:</p>
<p><a class="reference internal" href="../_images/image31.png"><img alt="image2" src="../_images/image31.png" style="width: 3.14961in; height: 4.71121in;" /></a></p>
<p>Figure : BLE 1M advertisement</p>
<p>BLE 2M Advertisement:</p>
<p><a class="reference internal" href="../_images/image41.png"><img alt="image3" src="../_images/image41.png" style="width: 3.14961in; height: 4.19948in;" /></a></p>
<p>Figure : BLE 2M advertisement</p>
<p><a class="reference internal" href="../_images/image5.jpeg"><img alt="A picture containing table Description automatically generated" src="../_images/image5.jpeg" style="width: 3.14961in; height: 6.18378in;" /></a></p>
<p>Figure : Successful connection and Read from Attribute</p>
</section>
</section>
<section id="secure-server-and-client-applications">
<h1>Secure Server and Client Applications<a class="headerlink" href="#secure-server-and-client-applications" title="Permalink to this heading"></a></h1>
<p>Security Manager Protocol (SMP) APIs enable a GATT Server acting as a
slave device to bond with a master and establish an encrypted link
between them.</p>
<p>Server and Client applications described in earlier section, are
extended here for incorporating security features supported by the SDK
and the sample code is in the path
examples/using_ble/src/ble_secure_server.c and
examples/using_ble/src/ble_secure_client.c.</p>
<section id="setting-security-parameters">
<h2>Setting Security Parameters<a class="headerlink" href="#setting-security-parameters" title="Permalink to this heading"></a></h2>
<p>SMP configuration is done using the bt_smp_cfg_set() API, after the
initialization.</p>
<p>It takes below fields as parameters input/output capabilities, OOB data
present, bondable or not, man in the middle attack protection, secure
connection support, generate keypress notifications, minimal key size
(bytes) that is accepted, encrypt link automatically at connection setup
if key exists, SMP callback functions.</p>
<p>In Server, SMP configuration is done before calling
bt_gap_connectable_mode().</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Starts our server */</p>
<p>static void start_server(void)</p>
<p>{</p>
<p>bt_gap_cfg_adv_t bt_adv_handle;</p>
<p>bt_smp_cfg_t bt_smp_handle;</p>
<p>/* Configure advertisement */</p>
<p>bt_adv_handle.fast_period = 10240;</p>
<p>bt_adv_handle.slow_period = 0;</p>
<p>bt_adv_handle.fast_interval = 160;</p>
<p>bt_adv_handle.slow_interval = 1600;</p>
<p>bt_adv_handle.tx_power = 0;</p>
<p>bt_adv_handle.channel_map = BT_HCI_ADV_CHANNEL_ALL;</p>
<p>bt_gap_cfg_adv_set(&amp;bt_adv_handle);</p>
<p>/* Set our BLE address */</p>
<p>bt_gap_addr_set(bt_hci_addr_type_random, SERVER_ADDR);</p>
<p>/* Set SMP Configuration */</p>
<p>#ifdef CLIENT_ANDROID_APP</p>
<p>bt_smp_handle.ops = &amp;smp_ops;</p>
<p>bt_smp_handle.io_cap = bt_smp_io_display_only;</p>
<p>bt_smp_handle.oob = 0;</p>
<p>bt_smp_handle.bondable = 1;</p>
<p>bt_smp_handle.mitm = 0;</p>
<p>bt_smp_handle.sc = 1;</p>
<p>bt_smp_handle.keypress = 0;</p>
<p>bt_smp_handle.key_size_min = 16;</p>
<p>bt_smp_handle.encrypt = 1;</p>
<p>bt_smp_cfg_set(&amp;bt_smp_handle);</p>
<p>#else</p>
<p>bt_smp_handle.ops = &amp;smp_ops;</p>
<p>bt_smp_handle.io_cap = bt_smp_io_no_input_no_output;</p>
<p>bt_smp_handle.oob = 0;</p>
<p>bt_smp_handle.bondable = 1;</p>
<p>bt_smp_handle.mitm = 0;</p>
<p>bt_smp_handle.sc = 1;</p>
<p>bt_smp_handle.keypress = 0;</p>
<p>bt_smp_handle.key_size_min = 16;</p>
<p>bt_smp_handle.encrypt = 1;</p>
<p>bt_smp_cfg_set(&amp;bt_smp_handle);</p>
<p>#endif</p>
<p>/* Make server connectable (will enable advertisement) */</p>
<p>bt_gap_discoverable_mode(GAP_DISCOVERABLE_MODE_GENERAL, 1, 0,</p>
<p>address_zero, &amp;gap_ops);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>In this example, bt_smp_io_no_input_no_output is configured as
bt_smp_io_capability_t in both server and client as there is no scope of
entering the PIN etc.</p>
<p>Therefore, the Just Works pairing method will be selected internally,
which does not require the generation of a random 6-digit passkey.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* BLE SMP callback functions */</p>
<p>static void passkey_input_cb(uint8_t handle)</p>
<p>{</p>
<p>uint8_t passkey[16];</p>
<p>/* Either 20-bits passkey or 128-bits oob */</p>
<p>os_printf(“Enter 20-bits passkey or 128-bits oob: …\n”);</p>
<p>/* FIXME */</p>
<p>bt_smp_passkey_set(handle, passkey);</p>
<p>}</p>
<p>static void passkey_output_cb(uint32_t passkey)</p>
<p>{</p>
<p>os_printf(“Passkey (to be entered on remote device): %06d\n”,</p>
<p>passkey);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="security-permissions-for-attributes">
<h2>Security Permissions for Attributes<a class="headerlink" href="#security-permissions-for-attributes" title="Permalink to this heading"></a></h2>
<p>When the Attributes are defined for GATT server, various security
permissions can be set for those read and write operations. Those
attributes will not be accessible if any of the security permission of
the peer device trying to access it, doesn’t match. An error is thrown
instead, indicating the peer that it does not have the required security
clearance.</p>
<p>This is shown in secure server example code while making a custom
characteristic in custom_server_create().</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>bt_gatt_add_char_128(srv.cust_service, UUID_CUSTOM_CHARACTERISTIC,
char_access_cb, (GATT_PERM_READ | GATT_PERM_ENCRYPTION |
GATT_PERM_ENC_KEY_SIZE_128 | GATT_PERM_AUTHORIZATION ),
GATT_CHAR_PROP_BIT_READ);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: Adding GATT_PERM_AUTHENTICATION will not allow the read access
in this example as the pairing occurred through Just Works pairing
method.</p>
<p>When pairing with Passkey Entry method is used, permission
GATT_PERM_AUTHENTICATION will be applicable. This is shown in one of the
next sections, where this same BLE secure server is enabled for Passkey
Entry method to be used with an Android Phone App as BLE client.</p>
</section>
<section id="requesting-for-authentication">
<h2>Requesting for Authentication<a class="headerlink" href="#requesting-for-authentication" title="Permalink to this heading"></a></h2>
<p>In this example, the authentication is requested by ble_secure_server
once any remote peer BLE client connects to it.</p>
<p>It is achieved by calling API bt_gap_authenticate()from the
connected_cb, the callback function received by server when any client
connects.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Callback called when the client connects */</p>
<p>static void connected_cb(bt_hci_event_t *hci_event)</p>
<p>{</p>
<p>const bt_hci_evt_le_conn_cmpl_t *param =
(bt_hci_evt_le_conn_cmpl_t*)&amp;hci_event-&gt;parameter;</p>
<p>os_printf(“Client connected\n”);</p>
<p>// Add link for the connection</p>
<p>srv.gatt_link = bt_gap_server_link_add(param-&gt;handle);</p>
<p>//smp authenticate</p>
<p>bt_gap_authenticate(param-&gt;handle, 0 /*oob*/, 1 /*bondable*/, 0
/*mitm*/, 0/*sc*/, 1 /*key128*/);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>This internally triggers the pairing request from BLE server side.</p>
</section>
<section id="running-talaria-two-ble-secure-server">
<h2>Running Talaria TWO BLE Secure Server<a class="headerlink" href="#running-talaria-two-ble-secure-server" title="Permalink to this heading"></a></h2>
<p>The ble_secure_server can be tested in two ways:</p>
<ol class="arabic simple">
<li><p>Android mobile application acting as BLE Secure Client</p></li>
<li><p>Talaria TWO application acting as BLE Secure Client</p></li>
</ol>
<section id="running-the-application-2">
<span id="id6"></span><h3>Running the Application<a class="headerlink" href="#running-the-application-2" title="Permalink to this heading"></a></h3>
<p>Program ble_secure_server.elf to Talaria TWO using the Download tool
(refer section 6.3 for steps on programming the ELF onto Talaria TWO).</p>
</section>
<section id="expected-output-2">
<span id="id7"></span><h3>Expected Output<a class="headerlink" href="#expected-output-2" title="Permalink to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-65f6c1f46 $</p>
<p>$App:git-e3ccdc7a</p>
<p>SDK Ver: sdk_2.4</p>
<p>Ble Secure Server Demo App</p>
<p>InnoServer started</p>
<p>[44.583,194] BT connect[0]: ia:79:af:65:43:91:82 aa:05:04:03:02:01:00
phy2:0/0 phyC:00</p>
<p>Client connected</p>
<p>Authentication succeeded.</p>
<p>InnoServer: Hello from InnoServer</p>
<p>InnoServer: You can do anything, but not everything.</p>
<p>InnoServer: The richest man is not he who has the most, but he who
needs the least.</p>
<p>InnoServer: You miss 100 percent of the shots you never take.</p>
<p>InnoServer: Courage is not the absence of fear, but rather the
judgment that something else is more important than fear.</p>
<p>InnoServer: You must be the change you wish to see in the world.</p>
<p>InnoServer: To the man who only has a hammer, everything he
encounters begins to look like a nail.</p>
<p>InnoServer: A wise man gets more use from his enemies than a fool
from his friends.</p>
<p>InnoServer: The real voyage of discovery consists not in seeking new
lands but seeing with new eyes.</p>
<p>InnoServer: Even if you’re on the right track, you’ll get run over if
you just sit there.</p>
<p>InnoServer: People often say that motivation doesn’t last. Well,
neither does bathing – that’s why we recommend it daily.</p>
<p>InnoServer: Believe those who are seeking the truth. Doubt those who
find it.</p>
<p>InnoServer: It is the mark of an educated mind to be able to
entertain a thought without accepting it.</p>
<p>InnoServer: I’d rather live with a good question than a bad answer.</p>
<p>InnoServer: We learn something every day, and lots of times its that
what we learned the day before was wrong.</p>
<p>InnoServer: I have made this letter longer than usual because I lack
the time to make it shorter.</p>
<p>InnoServer: Don’t ever wrestle with a pig. You’ll both get dirty, but
the pig will enjoy it.</p>
<p>InnoServer: An inventor is simply a fellow who doesn’t take his
education too seriously.</p>
<p>InnoServer: Never be afraid to laugh at yourself, after all, you
could be missing out on the joke of the century.</p>
<p>InnoServer: I am patient with stupidity but not with those who are
proud of it.</p>
<p>InnoServer: The cure for boredom is curiosity. There is no cure for
curiosity.</p>
<p>InnoServer: Advice is what we ask for when we already know the answer
but wish we didn’t.</p>
<p>InnoServer: Some people like my advice so much that they frame it
upon the wall instead of using it.</p>
<p>InnoServer: The trouble with the rat race is that even if you
win,you’re still a rat.</p>
<p>InnoServer: Imagination was given to man to compensate him for what
he is not,and a sense of humor was provided to console him for what
he is.</p>
<p>InnoServer: When a person can no longer laugh at himself, it is time
for others to laugh at him.</p>
<p>[69.993,697] BT disconnect[0]: st8</p>
<p>Client disconnected</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="running-android-mobile-application-as-ble-client">
<h3>Running Android Mobile Application as BLE Client<a class="headerlink" href="#running-android-mobile-application-as-ble-client" title="Permalink to this heading"></a></h3>
<p>To showcase the Passkey Entry method for pairing and attribute
permission GATT_PERM_AUTHENTICATION (for attribute to be allowed access
by a peer which is authenticated), the same BLE secure server code can
be compiled with the option #define CLIENT_ANDROID_APP 1 (its commented
by default).</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>#define CLIENT_ANDROID_APP 1</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>// Set SMP Configuration</p>
<p>#ifdef CLIENT_ANDROID_APP</p>
<p>bt_smp_handle.ops = &amp;smp_ops;</p>
<p>bt_smp_handle.io_cap = bt_smp_io_display_only;</p>
<p>bt_smp_handle.oob = 0;</p>
<p>bt_smp_handle.bondable = 1;</p>
<p>bt_smp_handle.mitm = 0;</p>
<p>bt_smp_handle.sc = 1;</p>
<p>bt_smp_handle.keypress = 0;</p>
<p>bt_smp_handle.key_size_min = 16;</p>
<p>bt_smp_handle.encrypt = 1;</p>
<p>bt_smp_cfg_set(&amp;bt_smp_handle);</p>
<p>#else</p>
<p>bt_smp_handle.ops = &amp;smp_ops;</p>
<p>bt_smp_handle.io_cap = bt_smp_io_no_input_no_output;</p>
<p>bt_smp_handle.oob = 0;</p>
<p>bt_smp_handle.bondable = 1;</p>
<p>bt_smp_handle.mitm = 0;</p>
<p>bt_smp_handle.sc = 1;</p>
<p>bt_smp_handle.keypress = 0;</p>
<p>bt_smp_handle.key_size_min = 16;</p>
<p>bt_smp_handle.encrypt = 1;</p>
<p>bt_smp_cfg_set(&amp;bt_smp_handle);</p>
<p>#endif</p>
<p>/* Make server connectable (will enable advertisement) */</p>
<p>bt_gap_discoverable_mode(GAP_DISCOVERABLE_MODE_GENERAL, 1, 0,</p>
<p>address_zero, &amp;gap_ops);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Now bt_smp_io_display_only is configured as bt_smp_io_capability_t, and
when Android Phone tries to connect to it, which has display as well as
keyboard, internally Passkey Entry method is chosen for pairing.</p>
<p>A mobile application called BLE Scanner (which is developed by Bluepixel
Technologies) is used for this example.</p>
<p>A random 6-digit passkey is generated and printed out to console for the
user to enter on Android App, which prompts for the key.</p>
<p>Also, while making a custom characteristic in custom_server_create(),
permission GATT_PERM_AUTHENTICATION is added, so only the authenticated
client can successfully read this characteristic.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>#define CLIENT_ANDROID_APP 1</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>#ifdef CLIENT_ANDROID_APP</p>
<p>bt_gatt_add_char_128(srv.cust_service, UUID_CUSTOM_CHARACTERISTIC,
char_access_cb, (GATT_PERM_READ | GATT_PERM_ENCRYPTION |
GATT_PERM_ENC_KEY_SIZE_128 | GATT_PERM_AUTHORIZATION |
GATT_PERM_AUTHENTICATION ), GATT_CHAR_PROP_BIT_READ);</p>
<p>#else</p>
<p>bt_gatt_add_char_128(srv.cust_service, UUID_CUSTOM_CHARACTERISTIC,
char_access_cb, (GATT_PERM_READ | GATT_PERM_ENCRYPTION |
GATT_PERM_ENC_KEY_SIZE_128 | GATT_PERM_AUTHORIZATION ),
GATT_CHAR_PROP_BIT_READ);</p>
<p>#endif</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="talaria-two-application-acting-as-ble-secure-client">
<h3>Talaria TWO application acting as BLE Secure Client<a class="headerlink" href="#talaria-two-application-acting-as-ble-secure-client" title="Permalink to this heading"></a></h3>
<p>For ble_secure_client, there is a need for two Talaria TWO boards, with
ble_secure_server.elf running on one and ble_secure_client.elf on the
other.</p>
<p>Program the ELFs onto Talaria TWO boards using the Download tool (refer
section 6.3 for steps on programming the ELFs onto Talaria TWO).</p>
</section>
<section id="expected-output-3">
<span id="id8"></span><h3>Expected Output<a class="headerlink" href="#expected-output-3" title="Permalink to this heading"></a></h3>
<p>ble_secure_server.elf</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-65f6c1f46 $</p>
<p>$App:git-e3ccdc7a</p>
<p>SDK Ver: sdk_2.4</p>
<p>Ble Secure Server Demo App</p>
<p>InnoServer started</p>
<p>[0.489,990] BT connect[0]: ia:45:a8:11:60:17:32 aa:05:04:03:02:01:00
phy2:0/0 phyC:00</p>
<p>Client connected</p>
<p>Authentication succeeded.</p>
<p>InnoServer: Hello from InnoServer</p>
<p>InnoServer: You can do anything, but not everything.</p>
<p>InnoServer: The richest man is not he who has the most, but he who
needs the least.</p>
<p>InnoServer: You miss 100 percent of the shots you never take.</p>
<p>InnoServer: Courage is not the absence of fear, but rather the
judgment that something else is more important than fear.</p>
<p>InnoServer: You must be the change you wish to see in the world.</p>
<p>InnoServer: To the man who only has a hammer, everything he
encounters begins to look like a nail.</p>
<p>InnoServer: A wise man gets more use from his enemies than a fool
from his friends.</p>
<p>InnoServer: The real voyage of discovery consists not in seeking new
lands but seeing with new eyes.</p>
<p>InnoServer: Even if you’re on the right track, you’ll get run over if
you just sit there.</p>
<p>InnoServer: People often say that motivation doesn’t last. Well,
neither does bathing – that’s why we recommend it daily.</p>
<p>InnoServer: Believe those who are seeking the truth. Doubt those who
find it.</p>
<p>InnoServer: It is the mark of an educated mind to be able to
entertain a thought without accepting it.</p>
<p>InnoServer: I’d rather live with a good question than a bad answer.</p>
<p>InnoServer: We learn something every day, and lots of times its that
what we learned the day before was wrong.</p>
<p>InnoServer: I have made this letter longer than usual because I lack
the time to make it shorter.</p>
<p>InnoServer: Don’t ever wrestle with a pig. You’ll both get dirty, but
the pig will enjoy it.</p>
<p>InnoServer: An inventor is simply a fellow who doesn’t take his
education too seriously.</p>
<p>InnoServer: Never be afraid to laugh at yourself, after all, you
could be missing out on the joke of the century.</p>
<p>InnoServer: I am patient with stupidity but not with those who are
proud of it.</p>
<p>InnoServer: The cure for boredom is curiosity. There is no cure for
curiosity.</p>
<p>InnoServer: Advice is what we ask for when we already know the answer
but wish we didn’t.</p>
<p>InnoServer: Some people like my advice so much that they frame it
upon the wall instead of using it.</p>
<p>InnoServer: The trouble with the rat race is that even if you
win,you’re still a rat.</p>
<p>InnoServer: Imagination was given to man to compensate him for what
he is not,and a sense of humor was provided to console him for what
he is.</p>
<p>InnoServer: When a person can no longer laugh at himself, it is time
for others to laugh at him.</p>
<p>[25.800,300] BT disconnect[0]: st8</p>
<p>Client disconnected</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>ble_secure_client.elf</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-65f6c1f46 $</p>
<p>$App:git-e3ccdc7a</p>
<p>SDK Ver: sdk_2.4</p>
<p>Ble Secure Client Demo App</p>
<p>InnoClient started</p>
<p>InnoServer address: 05:04:03:02:01:00</p>
<p>Scanning for InnoServer…</p>
<p>Discovered: 05:04:03:02:01:00 (InnoServer)</p>
<p>InnoServer 05:04:03:02:01:00 discovered!</p>
<p>Attempting to connect to InnoServer…</p>
<p>[9.948,176] BT connect[0]: ia:5c:04:14:ba:da:10 aa:05:04:03:02:01:00
phy2:0/0 phyC:00</p>
<p>Connected to InnoServer!</p>
<p>Starting service discovery…</p>
<p>InnoServer custom service discovered!</p>
<p>InnoServer custom characteristic discovered!</p>
<p>Exchanging mtu size…</p>
<p>Authentication succeeded.</p>
<p>mtu_set_event</p>
<p>InnoServer says: Hello from InnoServer</p>
<p>InnoServer says: You can do anything, but not everything.</p>
<p>InnoServer says: The richest man is not he who has the most, but he
who needs the least.</p>
<p>InnoServer says: You miss 100 percent of the shots you never take.</p>
<p>InnoServer says: Courage is not the absence of fear, but rather the
judgment that something else is more important than fear.</p>
<p>InnoServer says: You must be the change you wish to see in the world.</p>
<p>InnoServer says: To the man who only has a hammer, everything he
encounters begins to look like a nail.</p>
<p>InnoServer says: A wise man gets more use from his enemies than a
fool from his friends.</p>
<p>InnoServer says: The real voyage of discovery consists not in seeking
new lands but seeing with new eyes.</p>
<p>InnoServer says: Even if you’re on the right track, you’ll get run
over if you just sit there.</p>
<p>InnoServer says: People often say that motivation doesn’t last. Well,
neither does bathing – that’s why we recommend it daily.</p>
<p>InnoServer says: Believe those who are seeking the truth. Doubt those
who find it.</p>
<p>InnoServer says: It is the mark of an educated mind to be able to
entertain a thought without accepting it.</p>
<p>InnoServer says: I’d rather live with a good question than a bad
answer.</p>
<p>InnoServer says: We learn something every day, and lots of times it’s
that what we learned the day before was wrong.</p>
<p>InnoServer says: I have made this letter longer than usual because I
lack the time to make it shorter.</p>
<p>InnoServer says: Don’t ever wrestle with a pig. You’ll both get
dirty, but the pig will enjoy it.</p>
<p>InnoServer says: An inventor is simply a fellow who doesn’t take his
education too seriously.</p>
<p>InnoServer says: Never be afraid to laugh at yourself, after all, you
could be missing out on the joke of the century.</p>
<p>InnoServer says: I am patient with stupidity but not with those who
are proud of it.</p>
<p>InnoServer says: The cure for boredom is curiosity. There is no cure
for curiosity.</p>
<p>InnoServer says: Advice is what we ask for when we already know the
answer but wish we didn’t.</p>
<p>InnoServer says: Some people like my advice so much that they frame
it upon the wall instead of using it.</p>
<p>InnoServer says: The trouble with the rat race is that even if you
win,you’re still a rat.</p>
<p>InnoServer says: Imagination was given to man to compensate him for
what he is not,and a sense of humor was provided to console him for
what he is.</p>
<p>InnoServer says: When a person can no longer laugh at himself, it is
time for others to laugh at him.</p>
<p>InnoClient shutting down…</p>
<p>InnoClient stopped</p>
<p>[33.613,748] BT stopped</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading"></a></h2>
<p>In secure BLE server and client section, its shown that various
capabilities of the peer devices are exchanged and appropriate pairing
method is selected by the BLE stack. Based on this, key generation,
exchange and the encryption of the messages, is done. And when needed,
attribute permission can be set to use only encrypted, authenticated and
authorized read and write.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 InnoPhase IoT, Inc. | All Rights Reserved | Proprietary &amp; Confidential.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>