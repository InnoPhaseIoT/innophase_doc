<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; InnoPhase 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Introduction" href="IoT%20AWS.html" />
    <link rel="prev" title="Introduction" href="I2C.html" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js "></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="../_static/js/custom.js" defer></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            InnoPhase
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Getting_Started_Landing_page.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Hardware-Reference.html">Hardware-Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Porting-Guide.html">Porting-Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Software_Reference/Prerequisites/libusbK_driver-Zadig.html">Software Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Development_Environments/Development_Environments.html">Development Environments</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Tools/Tools_Landing.html">Tools</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Applications-Landing_Page.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#alarm">1.  Alarm</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#analog-to-digital-converter">2.  Analog to Digital Converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#audio-over-i2s">3.  Audio over I2S</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-5-0">4.  BLE 5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-beacons">3.  BLE Beacons</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-wi-fi-bridge">4.  BLE Wi-Fi Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#chip-monitor">5.  Chip Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#crash-handling">6.  Crash Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#custom-atcmdlib">6.  Custom ATCMDLIB</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#filesystem">7.  Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#firmware-over-the-air-upgrade">8.  Firmware Over the Air Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#gpio">9.  GPIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#host-interface-protocol">10. Host Interface Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#http-client">11. HTTP Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#i2c">12. I2C</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Applications-Landing_Page.html#ifttt">13. IFTTT</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ifttt">IFTTT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#accessing-ifttt">Accessing IFTTT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-an-account-in-ifttt">Creating an Account in IFTTT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ifttt-concepts">IFTTT Concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#applet">Applet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-an-applet-for-talaria-two">Creating an Applet for Talaria TWO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-walkthrough">Code Walkthrough</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#application-flow">Application Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-code-walkthrough">Sample Code Walkthrough</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-application">Running the Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#programming-talaria-two-board-with-elf">Programming Talaria TWO board with ELF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#expected-output">Expected Output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#iot-aws">14. IoT AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#iot-azure">15. IoT Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#low-power-scan">16. Low Power Scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#low-power-uart">17. Low Power UART</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#mdns">18. mDNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#memory-management-and-error-handling">19.  Memory Management and Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#message-queues">20.  Message Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#mqtt">21.  MQTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#provisioning">22.  Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#pulse-width-modulation">23.  Pulse Width Modulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#radio-and-module-parameters">24. Radio and Module Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#secure-files">25. Secure Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#simple-network-time-protocol">26.  Simple Network Time Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#sleep-enable-disable">27.  Sleep Enable Disable</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#socket-wakeup">28. Socket Wakeup</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#software-spi-master">29. Software SPI Master</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#spi-flash">30. SPI Flash</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ssbl">31. SSBL</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#thread-and-semaphores">32.  Thread and Semaphores</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#throughput-measurement">32.  Throughput Measurement</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#timers-and-callouts">33. Timers and Callouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#unassociated-mode">34. Unassociated Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#using-wi-fi">35. Using Wi-Fi</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#watchdog-timer">36. Watchdog Timer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#websocket-client">37. Websocket Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#wi-fi-connection-manager-multi-ap">38. Wi-Fi Connection Manager Multi-AP</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#wi-fi-power-management">39. Wi-Fi Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#work-queues">40. Work Queues</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Regulatory%20Notices/Regulatory%20Notices.html">Regulatory Notice</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Security/Security%20-%20Landing%20Page.html">Security</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Backend%20Files%20-%20for%20cross%20referencing/Backend%20File%20Landing.html">Backend Files - for cross referencing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">InnoPhase</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="Applications-Landing_Page.html">Applications</a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Applications/IFTTT.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h1>
<p>This document provides basic information about IFTTT. It discusses using
Talaria TWO with IFTTT with the help of an example application. The
information includes setting up Talaria TWO to connect to IFTTT, a
stepwise procedure to set up IFTTT account and the required
infrastructure in IFTTT.</p>
</section>
<section id="ifttt">
<h1>IFTTT<a class="headerlink" href="#ifttt" title="Permalink to this heading"></a></h1>
<p>IFTTT is a web service that provides easiest way to connect thousands of
apps and devices, including Google Drive, Amazon Alexa, Fitbit, Twitter,
Dropbox, Ring. Using IFTTT, two apps called <em>services</em> are connected
using an <em>applet</em> defined in IFTTT webservice.</p>
<section id="accessing-ifttt">
<h2>Accessing IFTTT<a class="headerlink" href="#accessing-ifttt" title="Permalink to this heading"></a></h2>
<p>IFTTT web service can be access using the following link:
<a class="reference external" href="https://ifttt.com/">https://ifttt.com/</a>.</p>
</section>
<section id="creating-an-account-in-ifttt">
<h2>Creating an Account in IFTTT<a class="headerlink" href="#creating-an-account-in-ifttt" title="Permalink to this heading"></a></h2>
<p>Having an account in IFTTT web service is a prerequisite to exploring
more and getting hands-on with the example application. This is free and
simple to create. Open the link in section 3.1 and click on Get Started.
Follow the steps as stated on the website.</p>
</section>
<section id="ifttt-concepts">
<h2>IFTTT Concepts<a class="headerlink" href="#ifttt-concepts" title="Permalink to this heading"></a></h2>
<p>There are four important concepts in IFTTT:</p>
<ol class="arabic simple">
<li><p>Service:</p></li>
</ol>
<blockquote>
<div><p>Services are already available/defined interfaces such as Twitter,
Facebook, Google Assistant etc.</p>
<p><strong>Note</strong>: These are IFTTT services defined in the IFTTT platform.
They internally connect with actual web services/applications that
are available outside IFTTT. Details on creating services is outside
the scope of this document.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Applet:</p></li>
</ol>
<blockquote>
<div><p>Applet is an entity defined in IFTTT that connects two services.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Trigger:</p></li>
</ol>
<blockquote>
<div><p>Once two IFTTT services are connected using an applet, one of the
application acts as the trigger. This IFTTT service that acts as
trigger, receives a request from outside and triggers a specific
action in the other service connected in the same applet.</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Action:</p></li>
</ol>
<blockquote>
<div><p>When the IFTTT service acting as the trigger triggers the other
service in the same applet, an action is taken by the other service.</p>
</div></blockquote>
</section>
<section id="applet">
<h2>Applet<a class="headerlink" href="#applet" title="Permalink to this heading"></a></h2>
<p>Applet on the IFTTT platform define the following:</p>
<ol class="arabic simple">
<li><p>The services to be connected</p></li>
<li><p>The service that is going to act as a trigger</p></li>
<li><p>The service that is going to take action</p></li>
</ol>
</section>
</section>
<section id="creating-an-applet-for-talaria-two">
<h1>Creating an Applet for Talaria TWO<a class="headerlink" href="#creating-an-applet-for-talaria-two" title="Permalink to this heading"></a></h1>
<p>This section discusses steps to create an applet for Talaria TWO to
interact with IFTTT. For this, we choose already available IFTTT
services like Webhooks and Email. The idea is to send data/request to
Webhooks service from Talaria TWO. This should trigger an email being
sent to the email address configured in the Email IFTTT service.</p>
<p><strong>Note</strong>: It is required to have an account before executing the next
set of steps.</p>
<ol class="arabic simple">
<li><p>Open maker.ifttt.com and sign in.</p></li>
<li><p>Click Create in the top right. Select If This.</p></li>
<li><p>In the search field, enter Webhooks and select that service. Select
Receive a web request.</p></li>
<li><p>In the Event Name field, enter suitable name like &lt;trigger_from_t2&gt;.
Click the Create trigger button.</p></li>
<li><p>Now, click on Then That. Select the Email service.</p></li>
<li><p>Choose the Send me an email action. If this is your first time
setting up an email action, click Connect, and proceed with the
configuration as instructed on IFTTT.</p></li>
<li><p>Both the trigger and action have now been configured. Click Continue.</p></li>
<li><p>Click Finish to create the applet.</p></li>
</ol>
<p>With this, an applet is defined.</p>
<p>Now, it is required to get the Webhook endpoint URL. Execute the
following steps to acquire the same:</p>
<ol class="arabic simple">
<li><p>Click on your profile picture in the top right, then click My
services.</p></li>
<li><p>Choose webhooks and click on Documentation in the upper right.</p></li>
<li><p>This gives the endpoint, like the following:
<a class="reference external" href="https://maker.ifttt.com/trigger/trigger_from_t2/with/key/c9ebSVVNGeSB1yi6NrVeyl">https://maker.ifttt.com/trigger/trigger_from_t2/with/key/c9ebSVVNGeSB1yi6NrVeyl</a></p></li>
</ol>
</section>
<section id="code-walkthrough">
<h1>Code Walkthrough<a class="headerlink" href="#code-walkthrough" title="Permalink to this heading"></a></h1>
<section id="application-flow">
<h2>Application Flow<a class="headerlink" href="#application-flow" title="Permalink to this heading"></a></h2>
<p>IFTTT is a web service that provides an easy way to connect thousands of
apps and devices, including Google Drive, Amazon Alexa, Fitbit, Twitter,
Dropbox, Ring. Using IFTTT, two apps named services are connected using
an applet defined in IFTTT webservice.</p>
<p>Following are the steps:</p>
<ol class="arabic simple">
<li><p>Connect to Wi-Fi network.</p></li>
<li><p>Connect to HTTP server.</p></li>
<li><p>Get the latest config file from remote server.</p></li>
<li><p>HTTP get method.</p></li>
<li><p>HTTP post method.</p></li>
</ol>
</section>
<section id="sample-code-walkthrough">
<h2>Sample Code Walkthrough<a class="headerlink" href="#sample-code-walkthrough" title="Permalink to this heading"></a></h2>
<p>A user-defined data struct is created to store the data of IFTTT:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>#define APP_NAME “IFTTT Demo Application”</p>
<p>#define APP_VERSION “2.0”</p>
<p>OS_APPINFO {.stack_size = 4096};</p>
<p>#define INPUT_PARAMETER_URL “url”</p>
<p>#define INPUT_PARAMETER_PORT “port”</p>
<p>#define INPUT_PARAMETER_SECURED “secured”</p>
<p>#define INPUT_PARAMETER_METHOD “method”</p>
<p>#define INPUT_PARAMETER_CA “ca_cert”</p>
<p>#define INPUT_PARAMETER_POST_LEN “post_len”</p>
<p>#define INPUT_PARAMETER_CLIENT_CERT “client_cert”</p>
<p>#define INPUT_PARAMETER_CLIENT_KEY “client_key”</p>
<p>#define INPUT_PARAMETER_USE_CA_BUNDLE “use_ca_bundle”</p>
<p>#define NULL_STR “”</p>
<p>struct param_t {</p>
<p>const char *ssid;</p>
<p>const char *passphrase;</p>
<p>const char *url;</p>
<p>const char *port;</p>
<p>const char *secured;</p>
<p>const char *method;</p>
<p>const char *ca_cert;</p>
<p>const char *post_len;</p>
<p>const char *client_cert;</p>
<p>const char *client_key;</p>
<p>const char *use_ca_bundle;</p>
<p>};</p>
<p>struct param_t param;</p>
<p>char default_port[8];</p>
<p>char default_secured[8];</p>
<p>char default_post_len[8];</p>
<p>struct os_semaphore app_wcm_lock;</p>
<p>int wcm_connect_success = 0;</p>
<p>static char host[128];</p>
<p>static char path[128];</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Following boot arguments are passed:</p>
<ol class="arabic simple">
<li><p>URL, port, secured, ca_cert, method, post_len, client_cert,
client_key value and ca_bundle.</p></li>
<li><p>SD service type and proto, and action.</p></li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>static int</p>
<p>parse_boot_args(void)</p>
<p>{</p>
<p>const char *np_path;</p>
<p>int ret = 0;</p>
<p>sprintf(default_port, “%d”, 80);</p>
<p>sprintf(default_secured, “%d”, 0);</p>
<p>sprintf(default_post_len, “%d”, 32);</p>
<p>param.url = os_get_boot_arg_str(INPUT_PARAMETER_URL);</p>
<p>param.port = os_get_boot_arg_str(INPUT_PARAMETER_PORT);</p>
<p>param.secured = os_get_boot_arg_str(INPUT_PARAMETER_SECURED);</p>
<p>param.ca_cert = os_get_boot_arg_str(INPUT_PARAMETER_CA);</p>
<p>param.method = os_get_boot_arg_str(INPUT_PARAMETER_METHOD);</p>
<p>param.post_len = os_get_boot_arg_str(INPUT_PARAMETER_POST_LEN);</p>
<p>param.client_cert = os_get_boot_arg_str(INPUT_PARAMETER_CLIENT_CERT);</p>
<p>param.client_key = os_get_boot_arg_str(INPUT_PARAMETER_CLIENT_KEY);</p>
<p>param.use_ca_bundle =
os_get_boot_arg_str(INPUT_PARAMETER_USE_CA_BUNDLE);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>To connect to a Wi-Fi network, wcm_create()API from the Wi-Fi Connection
Manager is used. Initially, the Wi-Fi network interface is created using
wcm_create().</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>wcm_handle = wcm_create(NULL);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>wifi_connect_to_network()API, from components library, connects to
the Wi-Fi network using the AP credentials provided.</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>wifi_connect_to_network(&amp;wcm_handle, WCM_CONN_WAIT_INFINITE,
&amp;wcm_connected);</p>
<p>if(wcm_connected != true) {</p>
<p>os_printf(”\n[APP]Error: Failed to connect to WiFi N/w”);</p>
<p>goto exit;</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Here, the data structure http_client_config_t cfg is used to pass the
parameter while opening a HTTP connection with remote server using
http_client_open such as URL, port, secured, ssl_cfg, time_out.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Connect to HTTP server*/</p>
<p>http_client_config_t cfg = {0};</p>
<p>http_client_handle_t http_handle;</p>
<p>memset(&amp;cfg, 0, sizeof(http_client_config_t));</p>
<p>path[0]= ‘\0’;</p>
<p>if(param.url){</p>
<p>os_printf(”\n[APP]URL = %s”, param.url);</p>
<p>rval = http_client_url_to_host(param.url, host, sizeof(host), path,</p>
<p>sizeof(path), &amp;cfg.port);</p>
<p>if(rval &lt; 0){</p>
<p>os_printf(”\n[APP]URL is not proper”);</p>
<p>os_printf(”\n\texample URLs:”);</p>
<p>os_printf(”\n\t\thttps://mak
er.ifttt.com/trigger/krg_door_open/with/key/c9ebSVVNGeSB1yi6NrVeyl”);</p>
<p>}</p>
<p>cfg.hostname = host;</p>
<p>}</p>
<p>if(param.port){/*If specified explicietly, overide the port
specified in URL*/</p>
<p>cfg.port = atoi(param.port);</p>
<p>}</p>
<p>cfg.secured = atoi(param.secured);</p>
<p>if(cfg.secured) {</p>
<p>if(cfg.secured == 1){</p>
<p>cfg.ssl_cfg.auth_mode = SSL_WRAP_VERIFY_NONE;</p>
<p>}else{</p>
<p>cfg.ssl_cfg.auth_mode = SSL_WRAP_VERIFY_REQUIRED;</p>
<p>if(!atoi(param.use_ca_bundle)){</p>
<p>cfg.ssl_cfg.ca_cert.buf = utils_file_get(param.ca_cert,</p>
<p>&amp;cfg.ssl_cfg.ca_cert.len);</p>
<p>if(NULL == cfg.ssl_cfg.ca_cert.buf){</p>
<p>os_printf(“Error: No CA certificate found. Required”);</p>
<p>goto exit;</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>if(param.client_cert &amp;&amp; strlen(param.client_cert)){</p>
<p>cfg.ssl_cfg.client_cert.buf = utils_file_get(param.client_cert,</p>
<p>&amp;cfg.ssl_cfg.client_cert.len);</p>
<p>if(NULL == cfg.ssl_cfg.client_cert.buf){</p>
<p>os_printf(“Error: Could not open client certificate\n”);</p>
<p>goto exit;</p>
<p>}</p>
<p>}</p>
<p>if(param.client_key &amp;&amp; strlen(param.client_key)){</p>
<p>cfg.ssl_cfg.client_key.buf = utils_file_get(param.client_key,</p>
<p>&amp;cfg.ssl_cfg.client_key.len);</p>
<p>if(NULL == cfg.ssl_cfg.client_key.buf){</p>
<p>os_printf(“Error: Could not open client key\n”);</p>
<p>goto exit;</p>
<p>}</p>
<p>}</p>
<p>cfg.secured = 1;</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Data structure http_client_resp_info_t is used to pass information about
the data received from the server when HTTP GET is executed using
http_client_get API.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>static void</p>
<p>app_http_cb(void * ctx, http_client_resp_info_t *resp)</p>
<p>{</p>
<p>static int total_bytes_rcvd = 0;</p>
<p>static int hdrs_printed = 0;</p>
<p>int i;</p>
<p>if(NULL == resp) {</p>
<p>return;</p>
<p>}</p>
<p>if(!hdrs_printed) {</p>
<p>os_printf(”\n\n[APP]Response:\n%d ———————-\n”,
resp-&gt;resp_len);</p>
<p>os_printf(”\n%d”, resp-&gt;status_code);</p>
<p>i = 0;</p>
<p>while(resp-&gt;resp_hdrs[i]) {</p>
<p>os_msleep(10);</p>
<p>os_printf(”\n%s”, resp-&gt;resp_hdrs[i]);</p>
<p>i++;</p>
<p>}</p>
<p>os_printf(”\n[APP]Body:\n”);</p>
<p>hdrs_printed = 1;</p>
<p>}</p>
<p>total_bytes_rcvd += resp-&gt;resp_len;</p>
<p>for(i = 0; i &lt; resp-&gt;resp_len; i++) {</p>
<p>os_printf(“%c”, resp-&gt;resp_body[i]);</p>
<p>}</p>
<p>return;</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>API http_client_open connects to the remote HTTP server. The
configuration needed for the connection is passed using
http_client_config_t.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>http_handle = http_client_open(&amp;cfg);</p>
<p>if(NULL == http_handle) {</p>
<p>os_printf(”\n[APP]Error: HTTP connection failed”);</p>
<p>goto exit;</p>
<p>}</p>
<p>os_printf(”\n[APP]Succes: HTTP connection done”);</p>
<p>/* Get the latest config file from remote server*/</p>
<p>http_client_set_req_hdr(http_handle, “Host”, cfg.hostname);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>This function is used for performing HTTP GET. The HTTP response is
provided through the call back. The call back is called multiple times
until the whole response is received.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>if(!strcmp(param.method, “get”)) {</p>
<p>/*HTTP get */</p>
<p>rval = http_client_get(http_handle, (char *)path, app_http_cb,</p>
<p>NULL, 300);</p>
<p>http_client_close(http_handle);</p>
<p>http_handle = NULL;</p>
<p>if(rval &lt; 0) {</p>
<p>os_printf(”\n[APP]Failure : http_client_get(), rval = %d”, rval);</p>
<p>goto exit;</p>
<p>}else{</p>
<p>os_printf(”\n[APP]Success”);</p>
<p>}</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>This function is used to perform HTTP POST. Using this data can be sent
to the HTTP server. The response is provided using the call back.
Setting content length header is a must using http_client_set_req_hdr
before calling this API.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>if(!strcmp(param.method, “post”)) {</p>
<p>/*HTTP post */</p>
<p>char *post_data;</p>
<p>int post_data_len = 0; /*atoi(param.post_len);*/</p>
<p>int send_len;</p>
<p>char conetnt_len_hdr_val[16];</p>
<p>post_data = os_alloc(1024);</p>
<p>if(NULL == post_data) {</p>
<p>os_printf(”\n[APP]Error: malloc failre for post_data”);</p>
<p>goto exit;</p>
<p>}</p>
<p>sprintf(conetnt_len_hdr_val, “%d”, post_data_len);</p>
<p>http_client_set_req_hdr(http_handle, “Content-length”,
conetnt_len_hdr_val);</p>
<p>while(post_data_len) {</p>
<p>send_len = post_data_len &gt; 1024 ? 1024 : post_data_len;</p>
<p>rval = http_client_post(http_handle, (char *)path,</p>
<p>post_data, send_len,</p>
<p>app_http_cb, NULL, 300);</p>
<p>if(rval &lt; 0) {</p>
<p>os_printf(”\n[APP]Failure : http_client_post(), rval = %d”, rval);</p>
<p>goto exit;</p>
<p>}</p>
<p>post_data_len -= send_len;</p>
<p>}</p>
<p>http_client_close(http_handle);</p>
<p>if(rval &gt;= 0){</p>
<p>os_printf(”\n[APP]Success”);</p>
<p>}else</p>
<p>goto exit;</p>
<p>}</p>
<p>os_printf(”\n\n[APP]—— Program Exit————-\n\n”);</p>
<p>return 0;</p>
<p>exit:</p>
<p>os_printf(”\n\n[APP]!!!!!! Error Exit !!!!!!!!!!!!!\n\n”);</p>
<p>return 0;</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="running-the-application">
<h1>Running the Application<a class="headerlink" href="#running-the-application" title="Permalink to this heading"></a></h1>
<section id="programming-talaria-two-board-with-elf">
<h2>Programming Talaria TWO board with ELF<a class="headerlink" href="#programming-talaria-two-board-with-elf" title="Permalink to this heading"></a></h2>
<p>Program ifttt.elf(sdk_x.y\examples\ifttt\bin) using the Download
tool:</p>
<ol class="arabic simple">
<li><p>Launch the Download tool provided with InnoPhase Talaria TWO SDK.</p></li>
<li><p>In the GUI window:</p>
<ol class="loweralpha simple">
<li><p>Boot Target: Select the appropriate EVK from the drop-down.</p></li>
<li><p>ELF Input: Load the ifttt.elf by clicking on Select ELF File.</p></li>
<li><p>Boot arguments: Pass the following boot arguments:</p></li>
</ol>
</li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>url=https://maker.ifttt.com/trigger/<a href="#id1"><span class="problematic" id="id2">trigger_</span></a>
from_t2/with/key/c9ebSVVNGeSB1yi6NrVeyl,port=443,secured=1,method=get</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>where,</p>
</div></blockquote>
<ol class="lowerroman simple">
<li><p>url: Webhooks end point URL</p></li>
<li><p>port: 443</p></li>
<li><p>secured: 1 - Connecting to server without server verification</p></li>
<li><p>method: GET</p></li>
</ol>
<ol class="loweralpha simple" start="4">
<li><p>Programming: Prog RAM or Prog Flash as per requirement.</p></li>
</ol>
<p>For more details on using the Download tool, refer to the document:
UG_Download_Tool.pdf (path: <em>sdk_x.y/pc_tools/Download_Tool/doc</em>).</p>
<p><strong>Note</strong>: x and y refer to the SDK release version. For example:
sdk_2.4/doc.</p>
</section>
<section id="expected-output">
<h2>Expected Output<a class="headerlink" href="#expected-output" title="Permalink to this heading"></a></h2>
<p>When the application is run with a proper endpoint URL, an email is
received from IFTTT to the email address provided in the Email service
at the time of creating the applet.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:SNWWWWAE</p>
<p>Build $Id: git-f1a4f00fb $</p>
<p>hio.baudrate=921600</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWWWAEBuild $Id: git-f1a4f00fb $</p>
<p>ssid=tplink_debug
url=https://maker.ifttt.com/trigger
/trigger_from_t2/with/key/cfYYk8z-DTB0yqc1bykK7ITP3A31mMW7J7QEfy-wbsk
port=443 secured=1 method=get passphrase=InnoQA2023$</p>
<p>$App:git-6519235e</p>
<p>SDK Ver: sdk_2.6.3_alpha</p>
<p>IFTTT Demo App</p>
<p>Application Information:</p>
<p>Name : IFTTT Demo Application</p>
<p>Version : 2.0</p>
<p>Build Date : Apr 3 2023</p>
<p>Build Time : 20:57:22</p>
<p>Heap Available: 331 KB (339096 Bytes)</p>
<p>[APP]Bootparams :</p>
<p>url=https://maker.ifttt.com/trigger
/trigger_from_t2/with/key/cfYYk8z-DTB0yqc1bykK7ITP3A31mMW7J7QEfy-wbsk</p>
<p>path= 443</p>
<p>secured= 1</p>
<p>method= get</p>
<p>ca_cert=&lt;null&gt;</p>
<p>post_len=&lt;null&gt;</p>
<p>use_ca_bundle = &lt;null&gt;</p>
<p>[APP]Bootparams end here….</p>
<p>[APP]Bootparams check done….ret = 0</p>
<p>addr e0:69:3a:00:0a:6a</p>
<p>network profile created for ssid: tplink_debug</p>
<p>Connecting to added network : tplink_debug</p>
<p>[0.945,385] CONNECT:60:32:b1:3a:83:ee Channel:1 rssi:-51 dBm</p>
<p>wcm_notify_cb to App Layer - WCM_NOTIFY_MSG_LINK_UP</p>
<p>wcm_notify_cb to App Layer - WCM_NOTIFY_MSG_ADDRESS</p>
<p>[1.217,714] MYIP 192.168.0.155</p>
<p>[1.217,763] IPv6 [fe80::e269:3aff:fe00:a6a]-link</p>
<p>wcm_notify_cb to App Layer - WCM_NOTIFY_MSG_CONNECTED</p>
<p>Connected to added network : tplink_debug</p>
<p>[APP]Success: Connected to &lt;null&gt; N/w</p>
<p>[APP]URL =
<a class="reference external" href="https://maker.ifttt.com/trigger">https://maker.ifttt.com/trigger</a>
/trigger_from_t2/with/key/cfYYk8z-DTB0yqc1bykK7ITP3A31mMW7J7QEfy-wbsk</p>
<p>. [SSL_WRAP]Checking input configurations…</p>
<p>. [SSL_WRAP]Seeding the random number generator…</p>
<p>. [SSL_WRAP]Connecting to tcp maker.ifttt.com:443…</p>
<p>. [SSL_WRAP]Setting up the SSL/TLS structure…</p>
<p>. [SSL_WRAP]setting configurations..</p>
<p>&gt;auth mode = 0 (0- skip, 1- optional, 2- required</p>
<p>&gt;max fragment len = 0</p>
<p>&gt;Handshake timeout = 30 Sec</p>
<p>. [SSL_WRAP]Performing the SSL/TLS handshake…</p>
<p>. [SSL_WRAP] Handshake done. ok</p>
<p>. [SSL_WRAP]Verifying peer X.509 certificate.</p>
<p>[APP]Succes: HTTP connection done</p>
<p>[APP]Response:</p>
<p>55 ———————- 200</p>
<p>Content-Type: text/html; charset=utf-8</p>
<p>Content-Length: 55</p>
<p>Connection: keep-alive</p>
<p>Date: Wed, 05 Apr 2023 07:58:29 GMT</p>
<p>ETag: W/”37-4jb44xEDYSdzHhse3E8QAYlkiaM”</p>
<p>X-Clacks-Overhead: GNU Terry Pratchett</p>
<p>X-Powered-By: Sad Unicorns</p>
<p>X-Robots-Tag: none</p>
<p>X-Top-Secrettt:
VG9vIGVhc3k/IElmIHlvdSBjYW4gcmVhZCB0aGlzLCB
FbWFpbCB1cyBhdCBqb2JzK3NlY3JldEBpZnR0dC5jb20uIFdlIHdhbnQgTWFrZXJzLg==</p>
<p>X-Cache: Miss from cloudfront</p>
<p>Via: 1.1 936179e33a47597eee0ce6ca36a747ba.cloudfront.net (CloudFront)</p>
<p>X-Amz-Cf-Pop: BLR50-P1</p>
<p>X-Amz-Cf-Id: AnEpXUJbESULCvVfelLrCMWmMFn2AFmHimcNQMFFg_OTBmbmI4EN1A==</p>
<p>[APP]Body:</p>
<p>Congratulations! You’ve fired the trigger_from_t2 event</p>
<p>[APP]Success</p>
<p>[APP]—— Program Exit————-</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="I2C.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="IoT%20AWS.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 InnoPhase IoT, Inc. | All Rights Reserved | Proprietary &amp; Confidential.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>