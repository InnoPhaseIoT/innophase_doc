<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; InnoPhase 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Introduction" href="Message%20Queues.html" />
    <link rel="prev" title="Introduction" href="mDNS.html" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js "></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="../_static/js/custom.js" defer></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            InnoPhase
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Getting_Started_Landing_page.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Hardware-Reference.html">Hardware-Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Porting-Guide.html">Porting-Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Software_Reference/Prerequisites/libusbK_driver-Zadig.html">Software Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Development_Environments/Development_Environments.html">Development Environments</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Tools/Tools_Landing.html">Tools</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Applications-Landing_Page.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#alarm">1.  Alarm</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#analog-to-digital-converter">2.  Analog to Digital Converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#audio-over-i2s">3.  Audio over I2S</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-5-0">4.  BLE 5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-beacons">3.  BLE Beacons</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-wi-fi-bridge">4.  BLE Wi-Fi Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#chip-monitor">5.  Chip Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#crash-handling">6.  Crash Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#custom-atcmdlib">6.  Custom ATCMDLIB</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#filesystem">7.  Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#firmware-over-the-air-upgrade">8.  Firmware Over the Air Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#gpio">9.  GPIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#host-interface-protocol">10. Host Interface Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#http-client">11. HTTP Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#i2c">12. I2C</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ifttt">13. IFTTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#iot-aws">14. IoT AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#iot-azure">15. IoT Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#low-power-scan">16. Low Power Scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#low-power-uart">17. Low Power UART</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#mdns">18. mDNS</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Applications-Landing_Page.html#memory-management-and-error-handling">19.  Memory Management and Error Handling</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-management-and-error-handling">Memory Management and Error Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#system-heap">System Heap</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memory-pools">Memory Pools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memory-management-and-error-handling-apis">Memory Management and Error Handling APIs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#system-heap-apis">System Heap APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memory-pool-apis">Memory Pool APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-handling-apis">Error Handling APIs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#code-walkthrough">Code Walkthrough</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-memory-management-1-c">Example memory_management_1.c</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-memory-management-2-c">Example memory_management_2.c</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-pool-c">Example pool.c</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-error-handling-c">Example error_handling.c</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#message-queues">20.  Message Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#mqtt">21.  MQTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#provisioning">22.  Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#pulse-width-modulation">23.  Pulse Width Modulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#radio-and-module-parameters">24. Radio and Module Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#secure-files">25. Secure Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#simple-network-time-protocol">26.  Simple Network Time Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#sleep-enable-disable">27.  Sleep Enable Disable</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#socket-wakeup">28. Socket Wakeup</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#software-spi-master">29. Software SPI Master</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#spi-flash">30. SPI Flash</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ssbl">31. SSBL</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#thread-and-semaphores">32.  Thread and Semaphores</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#throughput-measurement">32.  Throughput Measurement</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#timers-and-callouts">33. Timers and Callouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#unassociated-mode">34. Unassociated Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#using-wi-fi">35. Using Wi-Fi</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#watchdog-timer">36. Watchdog Timer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#websocket-client">37. Websocket Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#wi-fi-connection-manager-multi-ap">38. Wi-Fi Connection Manager Multi-AP</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#wi-fi-power-management">39. Wi-Fi Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#work-queues">40. Work Queues</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Regulatory%20Notices/Regulatory%20Notices.html">Regulatory Notice</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Security/Security%20-%20Landing%20Page.html">Security</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Backend%20Files%20-%20for%20cross%20referencing/Backend%20File%20Landing.html">Backend Files - for cross referencing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">InnoPhase</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="Applications-Landing_Page.html">Applications</a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Applications/Memory Management and Error Handling.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h1>
<p>This document describes the basics of memory management and error
handling in InnoOS™. It includes brief descriptions on system heap
memory allocation, memory reallocation, memory pools, freeing
dynamically allocated memory, and reporting of fatal errors using
available APIs. The accompanying code snippets demonstrate the use of
memory management and error handling APIs.</p>
</section>
<section id="memory-management-and-error-handling">
<h1>Memory Management and Error Handling<a class="headerlink" href="#memory-management-and-error-handling" title="Permalink to this heading"></a></h1>
<section id="system-heap">
<h2>System Heap<a class="headerlink" href="#system-heap" title="Permalink to this heading"></a></h2>
<p>System heap provides drivers and applications with dynamically allocated
memory buffers. It is initialized during system start-up and is
available when the application enters main(). The size of the system
heap is configurable with a boot argument heapsize (Refer Appendix A:
Boot arguments in the API Reference Manual for more information).</p>
<p>The functions os_alloc(), os_zalloc(), and os_realloc() are used to
request memory buffers from the heap. A small overhead is added to the
requested size. This overhead is used to track allocated and free
buffers. The function os_free() is used to free a buffer, returning it
to the system heap.</p>
</section>
<section id="memory-pools">
<h2>Memory Pools<a class="headerlink" href="#memory-pools" title="Permalink to this heading"></a></h2>
<p>Memory pools provide another way to dynamically allocate memory. Memory
pools are useful when an application needs to allocate multiple small
objects of a certain size. The use of a memory pool in such a scenario
helps to minimize memory allocation overhead and internal fragmentation
of the heap.</p>
<p>The pool allocator works by allocating large chunks of memory from the
page allocator. These chunks are split into the exact size the pool
allocator was initialized with (element_size) when pool_init() is
called. These objects can now be allocated and freed using the
pool_alloc() and pool_free()functions with minimal overhead in execution
time and memory usage.</p>
</section>
<section id="error-handling">
<h2>Error Handling<a class="headerlink" href="#error-handling" title="Permalink to this heading"></a></h2>
<p>Error handling refers to the anticipation, detection, resolution, and
possible recovery from error conditions that may occur during the
execution of a software application. It helps in maintaining the
expected flow of program execution.</p>
<p>A run-time error takes place during the execution of a program. There
are many types of runtime errors, which can be broadly categorized as
recoverable errors and unrecoverable errors.</p>
<p>For example, the errors returned by functions, as to indicate the caller
about the result through error codes, are recoverable.</p>
<p>Recoverable errors can be handled in many ways depending on the
scenario. For example, an attempt to recover can be made by retrying
(Ex: after a timeout) by reinitializing some components (Ex: drivers) or
resetting a non-responding peripheral. Or they can be handled by passing
the error to the other layer after releasing the resources.</p>
<p>The unrecoverable errors are fatal errors and can occur due to CPU
exceptions due to illegal instructions or access to protected memory
etc.</p>
<p>There are scenarios where some system-level checks are needed. And if
they fail, the fatal errors are needed to be induced by executing an
undefined instruction exception.</p>
<p>These fatal errors are handled by an exception handler which is used for
getting important debug information and reason for failure, helping the
problem to be solved using this information.</p>
</section>
</section>
<section id="memory-management-and-error-handling-apis">
<h1>Memory Management and Error Handling APIs<a class="headerlink" href="#memory-management-and-error-handling-apis" title="Permalink to this heading"></a></h1>
<section id="system-heap-apis">
<h2>System Heap APIs<a class="headerlink" href="#system-heap-apis" title="Permalink to this heading"></a></h2>
<section id="os-alloc">
<h3>os_alloc()<a class="headerlink" href="#os-alloc" title="Permalink to this heading"></a></h3>
<p>Allocates a block of memory at least the number of bytes in length asked
as a parameter and returns a pointer to it or returns NULL if it fails
in allocating.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void * os_alloc(size_t size)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Returned memory is aligned to the maximum natural alignment of the
system (8 in this implementation).</p>
</section>
<section id="os-zalloc">
<h3>os_zalloc()<a class="headerlink" href="#os-zalloc" title="Permalink to this heading"></a></h3>
<p>Similar to os_alloc()but with memory allocated is zero-initialized.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void * os_zalloc(size_t size)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="os-realloc">
<h3>os_realloc()<a class="headerlink" href="#os-realloc" title="Permalink to this heading"></a></h3>
<p>Attempts to change the size of an allocated block of memory.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void * os_realloc(void *ptr, size_t size)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>If the block can be resized in place, the same pointer passed in ptr is
returned. If the block must be moved, a pointer different from ptr is
returned.</p>
</section>
<section id="os-avail-heap">
<h3>os_avail_heap()<a class="headerlink" href="#os-avail-heap" title="Permalink to this heading"></a></h3>
<p>Returns the size of the remaining heap.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>size_t os_avail_heap(void)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>This is the total size including internal overhead and may not represent
the amount that can be allocated by an application.</p>
</section>
<section id="os-free">
<h3>os_free()<a class="headerlink" href="#os-free" title="Permalink to this heading"></a></h3>
<p>Free allocated memory.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void os_free(void *ptr)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>It returns the allocated memory to the heap. If the memory has more than
one reference, the count is simply dropped by one.</p>
</section>
</section>
<section id="memory-pool-apis">
<h2>Memory Pool APIs<a class="headerlink" href="#memory-pool-apis" title="Permalink to this heading"></a></h2>
<section id="pool-init">
<h3>pool_init()<a class="headerlink" href="#pool-init" title="Permalink to this heading"></a></h3>
<p>Initializes a memory pool.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void pool_init(struct memory_pool *pool, size_t element_size)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Pointer to memory_pool and the size of the objects allocated from the
pool is passed as input.</p>
</section>
<section id="pool-alloc">
<h3>pool_alloc()<a class="headerlink" href="#pool-alloc" title="Permalink to this heading"></a></h3>
<p>Allocates one object from the memory pool. If the pool is empty, the
memory will be allocated from the heap.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void * pool_alloc(struct memory_pool *pool)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Returns pointer to a new object.</p>
</section>
<section id="pool-free">
<h3>pool_free()<a class="headerlink" href="#pool-free" title="Permalink to this heading"></a></h3>
<p>Returns an object to the memory pool.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void pool_free(struct memory_pool *pool, void *ptr)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The memory pool is used to allocate memory chunks suitable to fit a
certain number of objects (of element_size).</p>
<p>When an object is freed using the pool_free(), the object is put on a
free-list in the pool for reuse at later point in time. This allows for
quick and efficient allocation of these objects.</p>
<p>The object is not returned to the heap until the destroy API is called.</p>
</section>
<section id="pool-destroy">
<h3>pool_destroy()<a class="headerlink" href="#pool-destroy" title="Permalink to this heading"></a></h3>
<p>Frees all memory claimed by the memory pool.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void pool_destroy(struct memory_pool *pool)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>All the previously allocated objects must be freed using
pool_free()before destroying them. All memory chunks get released to
heap on calling destroy.</p>
</section>
</section>
<section id="error-handling-apis">
<h2>Error Handling APIs<a class="headerlink" href="#error-handling-apis" title="Permalink to this heading"></a></h2>
<section id="os-error">
<h3>os_error()<a class="headerlink" href="#os-error" title="Permalink to this heading"></a></h3>
<p>os_error(uint32_t errcode)is used to report a potential system failure
scenario using a fatal error induced via an unidentified instruction
exception. This instruction has an immediate field in the instruction
encoding that is used to pass on supplied error code.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>static inline void __noreturn os_error(uint32_t errcode)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>This error is caught by the exception handler which dumps the CPU
register states and parts of the current stack on the debug console and
halt the system.</p>
</section>
<section id="os-error2">
<h3>os_error2()<a class="headerlink" href="#os-error2" title="Permalink to this heading"></a></h3>
<p>os_error2(uint32_t errcode, uint32_t extra) does the same thing as
os_error() with an extra argument parameter. This extra argument can be
used to pass some additional information about the error.</p>
<p>For example, an extra argument can be used to pass the ID of an invalid
argument, or the message to be passed when an assertion fails, or the
exception vector and, so on.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>static inline void __noreturn os_error2(uint32_t errcode, uint32_t
extra)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="enum-os-err-t">
<h3>enum os_err_t<a class="headerlink" href="#enum-os-err-t" title="Permalink to this heading"></a></h3>
<p>OS error codes are defined in this enum in error.h and are as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/**</p>
<p>* OS error codes</p>
<p>*/</p>
<p>typedef enum {</p>
<p>/** Error in application */</p>
<p>OS_ERR_APPLICATION = 0x00,</p>
<p>/** Heap is out of memory */</p>
<p>OS_ERR_HEAP_EXHAUSTED = 0x01,</p>
<p>/** Failed to initialize virtual memory */</p>
<p>OS_ERR_VM_INIT_FAILED = 0x02,</p>
<p>/** Invalid argument in os function call */</p>
<p>OS_ERR_INVALID_ARGUMENT = 0xfa,</p>
<p>/** An spurious event was triggered */</p>
<p>OS_ERR_SPURIOUS_EVENT = 0xfb,</p>
<p>/** OS internal error */</p>
<p>OS_ERR_INTERNAL_ERROR = 0xfc,</p>
<p>/** Timer callback missing */</p>
<p>OS_ERR_INVALID_TIMER = 0xfd,</p>
<p>/** Assertion failure */</p>
<p>OS_ERR_ASSERTION_FAILED = 0xfe,</p>
<p>/** Unexpected exception */</p>
<p>OS_ERR_UNEXPECTED_EXCEPTION = 0xff,</p>
<p>} os_err_t;</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="macro-os-err-heap-exhausted">
<h3>macro OS_ERR_HEAP_EXHAUSTED()<a class="headerlink" href="#macro-os-err-heap-exhausted" title="Permalink to this heading"></a></h3>
<p>OS memory allocation functions can be put under macro OS_ERROR_ON_NULL()
which returns the error OS_ERR_HEAP_EXHAUSTED if a NULL is returned by
the allocation function. Heap is out of memory.</p>
</section>
</section>
</section>
<section id="code-walkthrough">
<h1>Code Walkthrough<a class="headerlink" href="#code-walkthrough" title="Permalink to this heading"></a></h1>
<p><strong>Note</strong>: All the applicable ELF are available in the following location
of the SDK release package: sdk_x.y\examples\innoos_memory_mgmt\bin.</p>
<p>x and y in sdk_x.y refer to the SDK release version. For example:
<em>sdk_2.4\examples\innoos_memory_mgmt\bin</em>.</p>
<section id="example-memory-management-1-c">
<h2>Example memory_management_1.c<a class="headerlink" href="#example-memory-management-1-c" title="Permalink to this heading"></a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h3>
<p>The sample code in the path:
examples/innoos_memory_mgmt/src/memory_management_1.c</p>
<p>is a simple application that demonstrates the addition of two integers
using dynamic memory allocation and showcases os_alloc() ,
os_zalloc(),os_mem_incref() and os_free().</p>
</section>
<section id="sample-code-walkthrough">
<h3>Sample Code Walkthrough<a class="headerlink" href="#sample-code-walkthrough" title="Permalink to this heading"></a></h3>
<p>Consider the following section of the example:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>int a=10, b=20, *num_1, *num_2, *sum;</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>These pointers will be used to address memory that is dynamically
allocated to hold each of our integers and their sum.</p>
<p>Here in the example, heap memory is allocated for the three variables
using os_alloc() and os_zalloc():</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Memory allocation */</p>
<p>num_1 = (int*) os_alloc(sizeof(int));</p>
<p>num_2 = (int*) os_zalloc(sizeof(int));</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The memory for the variable num_2 is allocated using os_zalloc(). This
will initialize the variable with zero.</p>
<p>Memory for num_1 and sum is allocated with os_alloc().This function,
like os_zalloc(), allocates memory of a given size, but the difference
is that the allocated memory will not be initialized with zero.</p>
<p>Consider the following section of the example:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>os_printf(”\nprinting initial values num1(allocated using
os_alloc):\</p>
<p>[%d](garbage)\n”, *num_1);</p>
<p>os_printf(”\nprinting initial values num2(allocated using
os_zalloc)\</p>
<p>:[%d]\n”, *num_2);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The os_avail_heap() function reveals how much space is available on the
heap.</p>
<p>The snippet above first displays the available space on the heap. The
statement os_mem_incref(num_1) increments the reference count of the
memory allocated for num_1 by one. The second call to os_avail_heap()
will reveal that increasing the reference count did not change the
amount of available heap space.</p>
<p>The example contains the following:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>os_free(num_1);</p>
<p>os_free(num_2);</p>
<p>os_free(sum);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>os_free()is used to free allocated memory after use. For num_2 and sum,
only a single call to os_free() is needed to free the allocated memory.
Two os_free() calls are necessary to free the memory allocated for num_1
because the reference count for this piece of allocated memory was 2,
the reference count was 1 when the memory was allocated with os_alloc(),
and it increased by one with the call to os_mem_incref().</p>
</section>
<section id="running-the-application">
<h3>Running the Application<a class="headerlink" href="#running-the-application" title="Permalink to this heading"></a></h3>
<p>Program memory_management_1.elf using the Download tool:</p>
<ol class="arabic simple">
<li><p>Launch the Download tool provided with InnoPhase Talaria TWO SDK.</p></li>
<li><p>In the GUI window:</p>
<ol class="loweralpha simple">
<li><p>Boot Target: Select the appropriate EVK from the drop-down.</p></li>
<li><p>ELF Input: Load the memory_management_1.elf by clicking on Select
ELF File.</p></li>
<li><p>Programming: Prog RAM or Prog Flash as per requirement.</p></li>
</ol>
</li>
</ol>
<p>For more details on using the Download tool, refer to the document:
UG_Download_Tool.pdf (path: <em>sdk_x.y/pc_tools/Download_Tool/doc</em>).</p>
<p><strong>Note</strong>: x and y refer to the SDK release version. For example:
sdk_2.4/doc.</p>
</section>
<section id="expected-output">
<h3>Expected Output<a class="headerlink" href="#expected-output" title="Permalink to this heading"></a></h3>
<p>memory_management_1.elf is created when compiling the code which
provides the following console output when programmed to Talaria TWO.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-fdfd20079 $</p>
<p>$App:git-b1ab1153</p>
<p>SDK Ver: sdk_2.4</p>
<p>Memory Management Demo App 1</p>
<p>initial heap size:449944</p>
<p>printing initial values num1(allocated using os_alloc):
[329236](garbage)</p>
<p>printing initial values num2(allocated using os_zalloc) :[0]</p>
<p>heap after allocation:[449896]</p>
<p>Sum = 30</p>
<p>available heap before incref = [449896]</p>
<p>available heap after incref = [449896]</p>
<p>available heap after all free =[449928]</p>
<p>final heap size:[449944]</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="example-memory-management-2-c">
<h2>Example memory_management_2.c<a class="headerlink" href="#example-memory-management-2-c" title="Permalink to this heading"></a></h2>
<section id="overview-1">
<span id="id1"></span><h3>Overview<a class="headerlink" href="#overview-1" title="Permalink to this heading"></a></h3>
<p>The sample code in the path examples/innoos_memory_mgmt
/src/memory_management_2.c is a simple application that demonstrates the
memory reallocation using os_realloc().</p>
</section>
<section id="sample-code-walkthrough-1">
<span id="id2"></span><h3>Sample Code Walkthrough<a class="headerlink" href="#sample-code-walkthrough-1" title="Permalink to this heading"></a></h3>
<p>Consider the following section of the example:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>char *str;</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>This defines a pointer that will be used to address memory that is
dynamically allocated to hold the string.</p>
<p>In the example, heap memory is allocated using os_alloc():</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/*Initial memory allocation*/</p>
<p>str = (char *) os_alloc(10);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The memory for str is allocated using os_alloc(10), and the string can
store nine characters plus a null terminator.</p>
<p>The example then checks the remaining memory available on the heap:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Heap check after memory allocation*/</p>
<p>os_printf(”\nheap after allocation:[%d]\n”, os_avail_heap());</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>os_avail_heap() returns the amount of space available on the heap.</p>
<p>Next, we set the contents of the string:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>strcpy(str, “INNOPHASE”);</p>
<p>os_printf(“String = %s address[%p]”, str, str);</p>
<p>/* Reallocating memory */</p>
<p>str = (char *) os_realloc(str, 20);</p>
<p>strcat(str, ” Talaria”);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Here, INNOPHASE is first copied to the character array. By using
os_realloc(str, 30)<strong>,</strong> the size of the memory previously allocated
is changed to 30 characters. Post this, there is space to concatenate
Talaria to the existing string.</p>
<p>Once the dynamically allocated memory is no longer needed, it is freed:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>os_free(str);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>os_free() is used to free dynamically allocated memory. In this program,
os_free(str) frees the memory previously allocated for str.</p>
</section>
<section id="running-the-application-1">
<span id="id3"></span><h3>Running the Application<a class="headerlink" href="#running-the-application-1" title="Permalink to this heading"></a></h3>
<p>Program memory_management_2.elf using the Download tool:</p>
<ol class="arabic simple">
<li><p>Launch the Download tool provided with InnoPhase Talaria TWO SDK.</p></li>
<li><p>In the GUI window:</p>
<ol class="loweralpha simple">
<li><p>Boot Target: Select the appropriate EVK from the drop-down.</p></li>
<li><p>ELF Input: Load the memory_management_2.elf by clicking on Select
ELF File.</p></li>
<li><p>Programming: Prog RAM or Prog Flash as per requirement.</p></li>
</ol>
</li>
</ol>
<p>For more details on using the Download tool, refer to the document:
UG_Download_Tool.pdf (path: <em>sdk_x.y/pc_tools/Download_Tool/doc</em>).</p>
<p><strong>Note</strong>: x and y refer to the SDK release version. For example:
sdk_2.4/doc.</p>
</section>
<section id="expected-output-1">
<span id="id4"></span><h3>Expected Output<a class="headerlink" href="#expected-output-1" title="Permalink to this heading"></a></h3>
<p>memory_management_2.elf is created when compiling the code which
provides the following console output when programmed to Talaria TWO.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-fdfd20079 $</p>
<p>$App:git-b1ab1153</p>
<p>SDK Ver: sdk_2.4</p>
<p>Memory Management Demo App 2</p>
<p>initial heap available:448920</p>
<p>heap after allocation:[448896]</p>
<p>String = INNOPHASE address[0x000bfb60]</p>
<p>heap after reallocation:[448880]</p>
<p>String = INNOPHASE Talaria TWO address[0x000bfb60]</p>
<p>available heap after all free =[448920]</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="example-pool-c">
<h2>Example pool.c<a class="headerlink" href="#example-pool-c" title="Permalink to this heading"></a></h2>
<section id="overview-2">
<span id="id5"></span><h3>Overview<a class="headerlink" href="#overview-2" title="Permalink to this heading"></a></h3>
<p>The sample code in the path examples/innoos_memory_mgmt/src/pool.c is a
simple application that demonstrates the steps required to use a memory
pool including initialization of the pool, allocation and freeing of
memory from the pool, and cleanup of the pool when it is no longer
needed.</p>
</section>
<section id="sample-code-walkthrough-2">
<span id="id6"></span><h3>Sample Code Walkthrough<a class="headerlink" href="#sample-code-walkthrough-2" title="Permalink to this heading"></a></h3>
<p>The example program declares a structure struct Data, that represents
the kind of data that the application needs to manage. A memory pool
will be used to allocate memory for instances of this structure.</p>
<p>The structure declaration is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>struct Data</p>
<p>{</p>
<p>void *addr;</p>
<p>uint16_t length;</p>
<p>uint16_t flags;</p>
<p>void *next;</p>
<p>};</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The memory pool is defined as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Definition of a memory pool */</p>
<p>static struct memory_pool dd_pool;</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The function os_avail_heap() reveals the amount of memory available on
the heap. The example displays this information at various points to
show when the memory is allocated and freed on the heap when using the
memory pool.</p>
<p>Before the memory pool can be used, it needs to be initialized with
pool_init(). The second argument of pool_init()specifies the size of
objects that the pool will be used to allocate.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Get available heap memory before allocation */</p>
<p>os_printf(”\ninitial heap available:[%d]\n”, os_avail_heap());</p>
<p>/* Initialize memory pool*/</p>
<p>pool_init(&amp;dd_pool, sizeof(struct Data));</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Once the pool is initialized, memory can be allocated from the pool
using pool_alloc() as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Allocate memory from the pool */</p>
<p>struct Data *pdata1 = pool_alloc(&amp;dd_pool);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The example displays the amount of memory available on the heap after
the first allocation from the pool, as well as the pointer address of
the allocated memory and its size:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Check the amount of memory available on the heap again */</p>
<p>os_printf(”\nheap available after 1st allocation:[%d] allocated
address[%p] size[%d]\n”, os_avail_heap(), pdata1, sizeof(struct
Data));</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Memory that was allocated from the pool can be freed with pool_free():</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Free memory allocated from the pool */</p>
<p>pool_free(&amp;dd_pool, pdata1);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>When the memory pool is no longer needed, it can be destroyed using
pool_destroy(). Note that all memory previously allocated from the pool
must be freed before the pool is destroyed.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Destroy the pool */</p>
<p>pool_destroy(&amp;dd_pool);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="running-the-application-2">
<span id="id7"></span><h3>Running the Application<a class="headerlink" href="#running-the-application-2" title="Permalink to this heading"></a></h3>
<p>Program pool.elf using the Download tool:</p>
<ol class="arabic simple">
<li><p>Launch the Download tool provided with InnoPhase Talaria TWO SDK.</p></li>
<li><p>In the GUI window:</p>
<ol class="loweralpha simple">
<li><p>Boot Target: Select the appropriate EVK from the drop-down.</p></li>
<li><p>ELF Input: Load the pool.elf by clicking on Select ELF File.</p></li>
<li><p>Programming: Prog RAM or Prog Flash as per requirement.</p></li>
</ol>
</li>
</ol>
<p>For more details on using the Download tool, refer to the document:
UG_Download_Tool.pdf (path: <em>sdk_x.y/pc_tools/Download_Tool/doc</em>).</p>
<p><strong>Note</strong>: x and y refer to the SDK release version. For example:
sdk_2.4/doc.</p>
</section>
<section id="expected-output-2">
<span id="id8"></span><h3>Expected Output<a class="headerlink" href="#expected-output-2" title="Permalink to this heading"></a></h3>
<p>pool.elf is created when compiling the code and gives the following
console output when programmed to Talaria TWO.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-fdfd20079 $</p>
<p>$App:git-b1ab1153</p>
<p>SDK Ver: sdk_2.4</p>
<p>Mem Pool Demo App</p>
<p>initial heap available:[449680]</p>
<p>heap available after memory pool init: [449680]</p>
<p>heap available after 1st allocation:[449520] allocated
address[0x000bf570] size[12]</p>
<p>heap available after 1st free:[449520]</p>
<p>heap available after 2nd allocation:[449520] allocated
address[0x000bf580] size[12]</p>
<p>heap available after 2nd free:[449520]</p>
<p>final heap available:[449680]</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="example-error-handling-c">
<h2>Example error_handling.c<a class="headerlink" href="#example-error-handling-c" title="Permalink to this heading"></a></h2>
<section id="overview-3">
<span id="id9"></span><h3>Overview<a class="headerlink" href="#overview-3" title="Permalink to this heading"></a></h3>
<p>The sample code in the path:
examples/innoos_memory_mgmt/src/error_handling.c</p>
<p>is a simple application that demonstrates how fatal errors are reported
by calling APIs which induce an undefined instruction exception, in the
scenarios where the critical system level checks fail.</p>
<p>For example, the cases where system-level potential failures are needed
to be identified are, if the heap is getting exhausted if some undefined
event has occurred or if there is an invalid argument in the OS function
call, and so on.</p>
<p>These exceptions are handled internally by the default exception handler
os_unexpected_exception(), which prints an informative message on the
console with details of the CPU registers and state at the time of the
exception and the stack trace.</p>
</section>
<section id="sample-code-walkthrough-3">
<span id="id10"></span><h3>Sample Code Walkthrough<a class="headerlink" href="#sample-code-walkthrough-3" title="Permalink to this heading"></a></h3>
<p>This section of the program demonstrates heap exhaustion.
os_error(OS_ERR_HEAP_EXHAUSTED) is used to report a fatal error with an
error code representing heap exhaustion, which means that the heap is
out of memory.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>data_packet = os_alloc(1000000);</p>
<p>if (!data_packet)</p>
<p>{</p>
<p>os_printf(”\nthere is not enough memory to allocate the data packet.
Available heap:[%d]”, os_avail_heap());</p>
<p>os_error(OS_ERR_HEAP_EXHAUSTED);</p>
<p>return;</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>In the following code, os_error(OS_ERR_INVALID_ARGUMENT) is used to
report that a function argument is invalid.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>if (!input_data)</p>
<p>{</p>
<p>os_error(OS_ERR_INVALID_ARGUMENT);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>The following example reports a spurious event:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>os_error(OS_ERR_SPURIOUS_EVENT);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>By using os_error(OS_ERR_SPURIOUS_EVENT), a spurious event will be
handled as a fatal error.</p>
<p>An application-specific error can be reported as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/*Application specific error*/</p>
<p>os_error(OS_ERR_APPLICATION);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Additionally, the sample program reports an unexpected exception as:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>os_error2(OS_ERR_UNEXPECTED_EXCEPTION, 3);</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>For unexpected exception conditions, os_error2() is used.</p>
<p>Since each of these errors is fatal, the program will be terminated as
soon as one of them occurs. To experiment with various types of errors
in the sample program, disable earlier errors so that recent ones can be
seen. This can be accomplished by commenting out calls to functions that
produce errors.</p>
</section>
<section id="running-the-application-3">
<span id="id11"></span><h3>Running the Application<a class="headerlink" href="#running-the-application-3" title="Permalink to this heading"></a></h3>
<p>Program error_handling.elf using the Download tool:</p>
<ol class="arabic simple">
<li><p>Launch the Download tool provided with InnoPhase Talaria TWO SDK.</p></li>
<li><p>In the GUI window:</p>
<ol class="loweralpha simple">
<li><p>Boot Target: Select the appropriate EVK from the drop-down.</p></li>
<li><p>ELF Input: Load the error_handling.elf by clicking on Select ELF
File.</p></li>
<li><p>Programming: Prog RAM or Prog Flash as per requirement.</p></li>
</ol>
</li>
</ol>
<p>For more details on using the Download tool, refer to the document:
UG_Download_Tool.pdf (path: <em>sdk_x.y/pc_tools/Download_Tool/doc</em>).</p>
<p><strong>Note</strong>: x and y refer to the SDK release version. For example:
sdk_2.4/doc.</p>
</section>
<section id="expected-output-3">
<span id="id12"></span><h3>Expected Output<a class="headerlink" href="#expected-output-3" title="Permalink to this heading"></a></h3>
<p>error_handling.elf is created when compiling the code and provides the
following console output when programmed to Talaria TWO.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-fdfd20079 $</p>
<p>$App:git-b1ab1153</p>
<p>SDK Ver: sdk_2.4</p>
<p>Error Handling Demo App</p>
<p>Sample started. Available heap:[450456]</p>
<p>there is not enough memory to allocate the data packet. Available
heap:[450456]</p>
<p>OS_ERROR: HEAP EXHAUSTED</p>
<p>OS_UNEXPECTED_EXCEPTION 0x6</p>
<p>R0=00000058 R1=0004b728 R2=00fc0d00 R3=00000000</p>
<p>R4=04444444 R5=05555555 R6=06666666 R7=07777777</p>
<p>R8=08888888 R9=09999999 R10=0aaaaaaa R11=0bbbbbbb</p>
<p>R12=000b2bf2 SP=000b2c94 LR=001049fd PC=001049fc</p>
<p>xPSR=21000000 CONTROL=00000000 CFSR=00010000 BFAR=e000ed38</p>
<p>STACK:</p>
<p>0x000b2cd8: 03333333 000463b9 6e69616d 2189fa00</p>
<p>0x000b2ce8: 001049d1 07f83201 00000002 000b2c94</p>
<p>0x000b2cf8: 000b24e8 a5631209 000b2d00 000b2d00</p>
<p>0x000b2d08: 000b2d08 000b2d08 0004000c 0004000c</p>
<p>0x000b2d18: 0004005c 000bed20 000b2d20 000b2d20</p>
<p>0x000b2d28: 00000000 a0906362 6df329e6 7309ec7f</p>
<p>0x000b2d38: 9ae8e4cd 04b5564b 145d426c b9c0484e</p>
<p>0x000b2d48: ffc8daa3 ebfbaff5 8fa90474 1f15fa67</p>
<p>0x000b2d58: 7e719464 5ba8eb37 7635912d fd979a53</p>
<p>0x000b2d68: cbadc8d9 601b8df6 0b4e4084 679732f3</p>
<p>0x000b2d78: 297325ec 11401758 e51f63df 0b6a56b6</p>
<p>0x000b2d88: 70d31ab7 0e0912cd aafd1662 5df9b7f7</p>
<p>0x000b2d98: e349cfe6 8343f8b2 cd865e0a 33f21cc5</p>
<p>0x000b2da8: 6c98c51e dce15390 84f8e847 351cfd2a</p>
<p>0x000b2db8: e50d5dac b8202066 bdb87b4e 9974b068</p>
<p>0x000b2dc8: 0dc94b10 266dde76 4bb652e3 74264fbe</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mDNS.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Message%20Queues.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 InnoPhase IoT, Inc. | All Rights Reserved | Proprietary &amp; Confidential.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>