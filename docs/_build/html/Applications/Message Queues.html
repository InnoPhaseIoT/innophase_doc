<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; InnoPhase 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Introduction" href="MQTT.html" />
    <link rel="prev" title="Introduction" href="Memory%20Management%20and%20Error%20Handling.html" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js "></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="../_static/js/custom.js" defer></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            InnoPhase
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Getting_Started_Landing_page.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Hardware-Reference.html">Hardware-Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Porting-Guide.html">Porting-Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Software_Reference/Prerequisites/libusbK_driver-Zadig.html">Software Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Development_Environments/Development_Environments.html">Development Environments</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Tools/Tools_Landing.html">Tools</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Applications-Landing_Page.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#alarm">1.  Alarm</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#analog-to-digital-converter">2.  Analog to Digital Converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#audio-over-i2s">3.  Audio over I2S</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-5-0">4.  BLE 5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-beacons">3.  BLE Beacons</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ble-wi-fi-bridge">4.  BLE Wi-Fi Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#chip-monitor">5.  Chip Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#crash-handling">6.  Crash Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#custom-atcmdlib">6.  Custom ATCMDLIB</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#filesystem">7.  Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#firmware-over-the-air-upgrade">8.  Firmware Over the Air Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#gpio">9.  GPIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#host-interface-protocol">10. Host Interface Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#http-client">11. HTTP Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#i2c">12. I2C</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ifttt">13. IFTTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#iot-aws">14. IoT AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#iot-azure">15. IoT Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#low-power-scan">16. Low Power Scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#low-power-uart">17. Low Power UART</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#mdns">18. mDNS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#memory-management-and-error-handling">19.  Memory Management and Error Handling</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Applications-Landing_Page.html#message-queues">20.  Message Queues</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#message-queues">Message Queues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#message-queue-apis">Message Queue APIs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#os-sendmsg">os_sendmsg ()</a></li>
<li class="toctree-l4"><a class="reference internal" href="#os-recvmsg">os_recvmsg()</a></li>
<li class="toctree-l4"><a class="reference internal" href="#os-msg-alloc">os_msg_alloc()</a></li>
<li class="toctree-l4"><a class="reference internal" href="#macro-os-msg-alloc">Macro os_msg_alloc()</a></li>
<li class="toctree-l4"><a class="reference internal" href="#os-msg-release">os_msg_release()</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#code-walkthrough">Code Walkthrough</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-code-walkthrough">Sample Code Walkthrough</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-application">Running the Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#expected-output">Expected Output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#mqtt">21.  MQTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#provisioning">22.  Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#pulse-width-modulation">23.  Pulse Width Modulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#radio-and-module-parameters">24. Radio and Module Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#secure-files">25. Secure Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#simple-network-time-protocol">26.  Simple Network Time Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#sleep-enable-disable">27.  Sleep Enable Disable</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#socket-wakeup">28. Socket Wakeup</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#software-spi-master">29. Software SPI Master</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#spi-flash">30. SPI Flash</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#ssbl">31. SSBL</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#thread-and-semaphores">32.  Thread and Semaphores</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#throughput-measurement">32.  Throughput Measurement</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#timers-and-callouts">33. Timers and Callouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#unassociated-mode">34. Unassociated Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#using-wi-fi">35. Using Wi-Fi</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#watchdog-timer">36. Watchdog Timer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#websocket-client">37. Websocket Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#wi-fi-connection-manager-multi-ap">38. Wi-Fi Connection Manager Multi-AP</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#wi-fi-power-management">39. Wi-Fi Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="Applications-Landing_Page.html#work-queues">40. Work Queues</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Regulatory%20Notices/Regulatory%20Notices.html">Regulatory Notice</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Security/Security%20-%20Landing%20Page.html">Security</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Backend%20Files%20-%20for%20cross%20referencing/Backend%20File%20Landing.html">Backend Files - for cross referencing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">InnoPhase</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="Applications-Landing_Page.html">Applications</a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Applications/Message Queues.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h1>
<p>Message queues in InnoOS™ provide a simple abstraction by which threads
pass messages between each other. This document briefly explains the use
of message queue APIs in InnoOS™ using a sample application.</p>
</section>
<section id="message-queues">
<h1>Message Queues<a class="headerlink" href="#message-queues" title="Permalink to this heading"></a></h1>
<p>A message queue is a linked list of messages where messages can be
queued and dequeued by different processes/tasks, Thus providing the
mechanism for inter-process/task communication.</p>
<p>Messages are objects that can be passed between threads using the
message interface functions.</p>
<p>The messages are buffers allocated using the normal memory allocation
function os_alloc(), with the addition of a specific header at the
beginning of the message that is defined by the os_msg struct.</p>
<p>Each message is given an identification or type so that processes can
select the appropriate message.</p>
<p>Message Queue is the low-level abstraction upon which thread message
queue APIs os_sendmsg() and os_recvmsg() are based.</p>
</section>
<section id="message-queue-apis">
<h1>Message Queue APIs<a class="headerlink" href="#message-queue-apis" title="Permalink to this heading"></a></h1>
<section id="os-sendmsg">
<h2>os_sendmsg ()<a class="headerlink" href="#os-sendmsg" title="Permalink to this heading"></a></h2>
<p>Post a message to a thread using the current thread as a sender</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void os_sendmsg(struct os_thread *thread, struct os_msg *msg)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="os-recvmsg">
<h2>os_recvmsg()<a class="headerlink" href="#os-recvmsg" title="Permalink to this heading"></a></h2>
<p>Retrieves the next message from the threads message queue, optionally
blocking the thread until a message is available.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>struct os_msg * os_recvmsg(bool noblock)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Returns a pointer to os_msg.</p>
</section>
<section id="os-msg-alloc">
<h2>os_msg_alloc()<a class="headerlink" href="#os-msg-alloc" title="Permalink to this heading"></a></h2>
<p>Allocates a message (including the message header).</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>struct os_msg* os_msg_alloc(unsigned int type, size_t size)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>Parameters passed include:</p>
<ol class="arabic simple">
<li><p>Arbitrary integer that identifies the message type</p></li>
<li><p>Size of the message (including the size for the message header)</p></li>
<li><p>Pointer to newly allocated message or NULL.</p></li>
</ol>
</section>
<section id="macro-os-msg-alloc">
<h2>Macro os_msg_alloc()<a class="headerlink" href="#macro-os-msg-alloc" title="Permalink to this heading"></a></h2>
<p>Provides a convenient way to allocate a message of a specific type and
returns a pointer with that type. Parameters used are:</p>
<ol class="arabic simple">
<li><p>_msg: Pointer variable to which the allocated message will be
assigned</p></li>
<li><p>_type: Message-ID as an integer</p></li>
<li><p>_extra: Amount of additional buffer space to be allocated (in
addition to the size of the message type)</p></li>
</ol>
</section>
<section id="os-msg-release">
<h2>os_msg_release()<a class="headerlink" href="#os-msg-release" title="Permalink to this heading"></a></h2>
<p>Frees a message previously allocated using os_msg_alloc().</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>os_msg_release(struct os_msg *msg)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="code-walkthrough">
<h1>Code Walkthrough<a class="headerlink" href="#code-walkthrough" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>This sample code /examples/innoos_msg_q/src/msg_q.c demonstrates the use
of message queues in InnoOS™.</p>
<p>The sample code contains two threads:</p>
<ul class="simple">
<li><p>Message generator (sensor thread)</p></li>
</ul>
<blockquote>
<div><p>This thread simulates reading sensor values. It generates data
including sensor reading and sensor ID. This data is added to the
message queue for further processing. Sensor values are generated as
random numbers between 0 and 200.</p>
</div></blockquote>
<ul class="simple">
<li><p>Message processor (consumer thread)</p></li>
</ul>
<blockquote>
<div><p>This thread picks messages from the queue and prints message data on
the console. It also frees message memory after processing a message.</p>
</div></blockquote>
<p>In this example, the sensor thread acts as a producer of data which is
consumed by the message processor. A message queue facilitates the
passing of data between these two threads. There can be more than one
producer and consumer using a message queue.</p>
</section>
<section id="sample-code-walkthrough">
<h2>Sample Code Walkthrough<a class="headerlink" href="#sample-code-walkthrough" title="Permalink to this heading"></a></h2>
<section id="message-structure">
<h3>Message Structure<a class="headerlink" href="#message-structure" title="Permalink to this heading"></a></h3>
<p>As described previously, message queues are useful for exchanging data
between threads. Data is defined by the application. In this example,
data consists of a sensor ID and a sensor reading:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>typedef struct message_data{</p>
<p>struct os_msg msg; /*This needs to be the first member of the
structure*/</p>
<p>char sensor_id[MSG_QUE_MAX_SENSOR_ID_LEN];</p>
<p>int sensor_reading;</p>
<p>}</p>
<p>messageData;</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>When defining the message data structure, struct os_msg must be the
first member. The application can add additional members after struct
os_msg as required.</p>
</section>
<section id="creating-sensor-and-consumer-threads">
<h3>Creating Sensor and Consumer Threads<a class="headerlink" href="#creating-sensor-and-consumer-threads" title="Permalink to this heading"></a></h3>
<p>The sensor and consumer threads are created as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/*Createconsumerthread*/</p>
<p>consumer_thread =
os_create_thread(“consumer_thread”,consumer_thread_func,</p>
<p>NULL, MSG_QUE_THREAD_PRIORITY, MSG_QUE_THREAD_STACK_SIZE);</p>
<p>if( NULL == consumer_thread ){</p>
<p>os_printf(”\nCreation of consumer_thread failed!. Error:%s”,
strerror(errno));</p>
<p>return -1;</p>
<p>}</p>
<p>/*Create sensor thread*/</p>
<p>sensor_thread = os_create_thread(“sensor_thread”,sensor_thread_func,</p>
<p>NULL, MSG_QUE_THREAD_PRIORITY, MSG_QUE_THREAD_STACK_SIZE);</p>
<p>if( NULL == sensor_thread ){</p>
<p>os_printf(”\nCreation of sensor_thread failed!. Error:%s”,
strerror(errno));</p>
<p>return -1;</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="sensor-thread-procedure">
<h3>Sensor Thread Procedure<a class="headerlink" href="#sensor-thread-procedure" title="Permalink to this heading"></a></h3>
<p>The sensor thread simulates reading from a sensor using a random value
as the sensor reading. The thread allocates a message using the
os_msg_alloc()API and populates the message with sensor data. The
message is pushed onto the message queue using os_sendmsg().</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Sensor thread callback function. This thread creates messages
with random sensor readings. */</p>
<p>static void* sensor_thread_func(void* arg)</p>
<p>{</p>
<p>…</p>
<p>messageData *msg_info;</p>
<p>msg_info = (messageData *)
os_msg_alloc(MSG_QUE_MSG_TYPE_SENSOR_DATA,</p>
<p>sizeof(*msg_info));</p>
<p>/* Set dummy data */</p>
<p>snprintf(sensor_buf,18,”ABCDEFGHIJKLMN-%d”,nMsgSent);</p>
<p>strncpy(msg_info-&gt;sensor_id, sensor_buf,
sizeof(msg_info-&gt;sensor_id));</p>
<p>/*Setting a random value*/</p>
<p>msg_info-&gt;sensor_reading = (int)
(rand()%MSG_QUE_MAX_SENSOR_POSSIBLE_VALUE);</p>
<p>/* Send the message over Queue*/</p>
<p>os_sendmsg(consumer_thread, &amp;msg_info-&gt;msg);</p>
<p>os_printf (”\n%x:Number of messages sent %d”,\</p>
<p>MSG_QUE_CURRENT_THREAD_ID, ++nMsgSent);</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="consumer-thread-procedure">
<h3>Consumer Thread Procedure<a class="headerlink" href="#consumer-thread-procedure" title="Permalink to this heading"></a></h3>
<p>The consumer thread checks for messages in the queue. The os_recvmsg()
function receives the messages from the message queue optionally
blocking the thread based on the argument passed. This function returns
a struct os_msg pointer.</p>
<p>A pointer to the application-defined data structure can be retrieved
using container_of() API.</p>
<p>The macro container_of(ptr, type,member)takes three arguments:</p>
<ol class="arabic simple">
<li><p>A pointer</p></li>
<li><p>Type of the container</p></li>
<li><p>Name of the member the pointer refers to</p></li>
</ol>
<p>The macro will then expand to a new address pointing to the container
which accommodates the respective member.</p>
<p>The consumer thread is then able to perform any processing of the
message data. In this case, the data is printed to the console. After
the message has been processed, it is freed with os_msg_release().</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>/* Consumer thread callback function */</p>
<p>static void* consumer_thread_func(void* arg)</p>
<p>…</p>
<p>struct os_msg *m = os_recvmsg(false);</p>
<p>…</p>
<p>/* Extract the application-specific message info from the message
*/</p>
<p>msg_info = container_of(m, /* Received message pointer */</p>
<p>messageData /* Expected message data type */,</p>
<p>msg); /* Variable name for ‘struct os_msg’ in ‘messageData’ */</p>
<p>…</p>
<p>os_printf(”\n%x:Got new msg. Count[%d]. Reading[%d] ID[%s]”,</p>
<p>MSG_QUE_CURRENT_THREAD_ID, nMsgReceived,</p>
<p>msg_info-&gt;sensor_reading, msg_info-&gt;sensor_id);</p>
<p>…</p>
<p>/* Release the memory*/</p>
<p>os_msg_release(m);</p>
<p>}</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="running-the-application">
<h2>Running the Application<a class="headerlink" href="#running-the-application" title="Permalink to this heading"></a></h2>
<p>Program msg_q.elf (sdk_x.y\examples\innoos_msg_q\bin) using the
Download tool:</p>
<ol class="arabic simple">
<li><p>Launch the Download tool provided with InnoPhase Talaria TWO SDK.</p></li>
<li><p>In the GUI window:</p>
<ol class="loweralpha simple">
<li><p>Boot Target: Select the appropriate EVK from the drop-down.</p></li>
<li><p>ELF Input: Load the msg_q.elf by clicking on Select ELF File.</p></li>
<li><p>Programming: Prog RAM or Prog Flash as per requirement.</p></li>
</ol>
</li>
</ol>
<p>For more details on using the Download tool, refer to the document:
UG_Download_Tool.pdf (path: <em>sdk_x.y/pc_tools/Download_Tool/doc</em>).</p>
<p><strong>Note</strong>: x and y refer to the SDK release version. For example:
sdk_2.4/doc.</p>
</section>
<section id="expected-output">
<h2>Expected Output<a class="headerlink" href="#expected-output" title="Permalink to this heading"></a></h2>
<p>msg_q.elf is created when compiling the code which gives the following
console output when programmed to Talaria TWO:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>UART:NWWWWWAE4 DWT comparators, range 0x8000</p>
<p>Build $Id: git-7e2fd6a94 $</p>
<p>app=gordon</p>
<p>flash: Gordon ready!</p>
<p>Y-BOOT 208ef13 2019-07-22 12:26:54 -0500 790da1-b-7</p>
<p>ROM yoda-h0-rom-16-0-gd5a8e586</p>
<p>FLASH:PNWWWAEBuild $Id: git-65f6c1f46 $</p>
<p>$App:git-46e2bea7</p>
<p>SDK Ver: sdk_2.4</p>
<p>Innos Msg Queue Demo App</p>
<p>b4190:Consumer thread started</p>
<p>b4410:Number of messages sent 1</p>
<p>b4190:Got new msg. Count[1]. Reading[0] ID[ABCDEFGHIJKLMN-0]</p>
<p>b4410:Number of messages sent 2</p>
<p>b4190:Got new msg. Count[2]. Reading[187] ID[ABCDEFGHIJKLMN-1]</p>
<p>….</p>
<p>….</p>
<p>….</p>
<p>b4410:Number of messages sent 19</p>
<p>b4190:Got new msg. Count[19]. Reading[190] ID[ABCDEFGHIJKLMN-18]</p>
<p>b4410:Number of messages sent 20</p>
<p>b4190:Got new msg. Count[20]. Reading[131] ID[ABCDEFGHIJKLMN-19]</p>
<p>b4190:Received all messages from the producer</p>
<p>b4410:Completed sending all the messages.</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Memory%20Management%20and%20Error%20Handling.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="MQTT.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 InnoPhase IoT, Inc. | All Rights Reserved | Proprietary &amp; Confidential.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>