<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FirmWare Over The Air &mdash; InnoPhase 1.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="http client" href="httpclient_apiref.html" />
    <link rel="prev" title="Alarm Api ref" href="alarm_apiref.html" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js "></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="../../_static/js/custom.js" defer></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            InnoPhase
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Getting%20Started/Getting%20Started%20-%20Landing%20Page.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware%20Reference/Hardware-Reference.html">Hardware-Reference</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../Software_Reference_Landing_Page.html">Software Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../Software_Reference_Landing_Page.html#libraries">Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html">1.  alarm</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="1.%20Libraries-Landing.html#fota">2.  fota</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">FirmWare Over The Air</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fota-perform">fota_perform</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html#http">3.  http</a></li>
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html#mdns">4.  mdns</a></li>
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html#mqtt">5.  mqtt</a></li>
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html#prov">6.  prov</a></li>
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html#sntp">7.  sntp</a></li>
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html#ssl-wrap">8.  ssl_wrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html#utils">9.  utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="1.%20Libraries-Landing.html#websocket">10. websocket</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Software_Reference_Landing_Page.html#solutions">Solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Software_Reference_Landing_Page.html#cloud-frameworks">Cloud Frameworks</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Development%20Environments/Development%20Environments%20-%20Landing%20Page.html">Development Environments</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Tools/Tools-landing%20page.html">Tools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Applications/Applications%20-%20Landing%20Page.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Regulatory%20Notices/Regulatory%20Notices.html">Regulatory Notices</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Security/Security%20-%20Landing%20Page.html">Security</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Porting%20Guide/Porting-Guide.html">Porting-Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Support/Support.html">Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Disclaimers/Disclaimers.html">Disclaimer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Appendix/Appendix-Landing_Page.html">Appendix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">InnoPhase</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Software_Reference_Landing_Page.html">Software Reference</a></li>
          <li class="breadcrumb-item"><a href="1.%20Libraries-Landing.html">1.  alarm</a></li>
      <li class="breadcrumb-item active">FirmWare Over The Air</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Software Reference/1. Libraries/fota_apiref.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="firmware-over-the-air">
<h1>FirmWare Over The Air<a class="headerlink" href="#firmware-over-the-air" title="Permalink to this heading"></a></h1>
<p>Firmware-Over-the-Air (FOTA) allows for wireless delivery of firmware
updates and/or configurations to embedded devices.</p>
<p>This section describes the FOTA process for the Talaria TWO EVB using
the Talaria TWO SDK with details on how to implement or trigger FOTA in
a customer provided application.</p>
<p>This implementation of FOTA provides the following facilities:</p>
<ol class="arabic simple">
<li><p>Check for the availability of new upgrades</p></li>
<li><p>Securely download the image into flash</p></li>
<li><p>Check the validity of the downloaded image</p></li>
<li><p>Set the new image as the boot image</p></li>
</ol>
<p>In conjunction with SSBL, it enables booting the latest image
downloaded. The firmware is downloaded into the application image
partition in Flash.</p>
<p>Refer FOTA application for various configuration files and modules on
which FOTA is dependent, its design and functional flow.</p>
<section id="features-and-limitations">
<h2>Features and Limitations<a class="headerlink" href="#features-and-limitations" title="Permalink to this heading"></a></h2>
<p>Following are the FOTA application features:</p>
<ol class="arabic simple">
<li><p>FOTA over HTTP/HTTPS.</p></li>
<li><p>Image download from Cloud or any HTTP/web server.</p></li>
<li><p>Two copy solution. Backup copy of the correct firmware always exists.</p></li>
<li><p>Image integrity check using sha256 hash.</p></li>
<li><p>Error handling and recovery</p>
<ol class="loweralpha simple">
<li><p>If any error occurs during downloading the image or updating the
configuration files (part.json/boot.json/fota_config.json), the
device will remain in the current image.</p></li>
<li><p>If a reboot occurs (due to issues like power failure) during image
download or configuration files upgrade, the device will boot with
the current image.</p></li>
</ol>
</li>
<li><p>JSON based configuration</p></li>
</ol>
<p>Limitations: Upgrading the Certificates is not supported as of now.</p>
</section>
<section id="header-file-s">
<h2>Header file/s<a class="headerlink" href="#header-file-s" title="Permalink to this heading"></a></h2>
<p>Components/fota/inc/fota.h.</p>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this heading"></a></h2>
</section>
<section id="fota-init">
<h2>fota_init<a class="headerlink" href="#fota-init" title="Permalink to this heading"></a></h2>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>This API initializes the FOTA module.</p>
</section>
<section id="definition">
<h2>Definition<a class="headerlink" href="#definition" title="Permalink to this heading"></a></h2>
<table class="docutils align-default" id="id12">
<caption><span class="caption-text">Table : fota_perform - parameters</span><a class="headerlink" href="#id12" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>fota_handle_t *</p>
<p>fota_init(void)</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="return">
<h2>Return<a class="headerlink" href="#return" title="Permalink to this heading"></a></h2>
<p>Success: Pointer to FOTA handle.</p>
<p>Error: NULL.</p>
</section>
</section>
<section id="fota-perform">
<h1>fota_perform<a class="headerlink" href="#fota-perform" title="Permalink to this heading"></a></h1>
<section id="overview-1">
<span id="id1"></span><h2>Overview<a class="headerlink" href="#overview-1" title="Permalink to this heading"></a></h2>
<p>Performs the FOTA update. This API checks for the update. If an update
is available, it downloads the firmware specified in the fota.config
file.</p>
</section>
<section id="definition-1">
<span id="id2"></span><h2>Definition<a class="headerlink" href="#definition-1" title="Permalink to this heading"></a></h2>
<table class="docutils align-default" id="id13">
<caption><span class="caption-text">Table : fota_commit - parameters</span><a class="headerlink" href="#id13" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>int</p>
<p>fota_perform(fota_handle_t *f_handle, int check_for_update, int
flags)</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h2>
<table class="docutils align-default" id="id14">
<caption><span class="caption-text">Table : fota_deinit - parameters</span><a class="headerlink" href="#id14" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Parameter</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>handle</em></p></td>
<td><p>Handle returned by fota_init()</p></td>
</tr>
<tr class="row-odd"><td><p><em>chec
k_for_update</em></p></td>
<td><p>This can be FOTA_NO_CHECK_FOR_UPDATE /
FOTA_CHECK_FOR_UPDATE /
FOTA_FETCH_CFG_NO_CHECK_FOR_UPDATE</p>
<ol class="arabic simple">
<li><p>FOTA_NO_CHECK_FOR_UPDATE - No check done. FOTA is
done using the currently available fota.config
file in the data fs.</p></li>
<li><p>FOTA_CHECK_FOR_UPDATE - Check if an update is
available before executing FOTA. foat.config file
will be fetched from cloud and the package
version of the latest file is compared against
the fota.config file present in data fs. FOTA is
done only if the latest version is greater than
the one preset on the device.</p></li>
<li><p>FOTA_FETCH_CFG_NO_CHECK_FOR_UPDATE - foat.config
file will be fetched from the cloud. No check is
done using package version. Newly downloaded
fota.config file will be used for FOTA. This
option can be used only if availability of newer
package is confirmed using some other mechanism
(like, MQTT for example) and FOTA needs to be
done as per the latest fota.config in the cloud.</p></li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p><em>Flags</em></p></td>
<td><p>Not currently used. Always set to 0.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="return-1">
<span id="id3"></span><h2>Return<a class="headerlink" href="#return-1" title="Permalink to this heading"></a></h2>
<p>Success: 0</p>
<p>Error: &lt;0 (Refer fota_error_t)</p>
</section>
<section id="fota-commit">
<h2>fota_commit<a class="headerlink" href="#fota-commit" title="Permalink to this heading"></a></h2>
</section>
<section id="overview-2">
<span id="id4"></span><h2>Overview<a class="headerlink" href="#overview-2" title="Permalink to this heading"></a></h2>
<p>After the FOTA update is done, call this function to set the newly
updated firmware as the default. This needs to be called after
fota_perform() is a success.</p>
</section>
<section id="definition-2">
<span id="id5"></span><h2>Definition<a class="headerlink" href="#definition-2" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>int</p>
<p>fota_commit(fota_handle_t *f_handle, int do_reset)</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="parameters-1">
<span id="id6"></span><h2>Parameters<a class="headerlink" href="#parameters-1" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Pa
rameter</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
<p>f_handle*</p>
</td>
<td><p>Pointer to the FOTA handle that was returned by
fota_init()</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
<p>do_reset*</p>
</td>
<td><p>If set to 1, perform reset</p></td>
</tr>
</tbody>
</table>
</section>
<section id="return-2">
<span id="id7"></span><h2>Return<a class="headerlink" href="#return-2" title="Permalink to this heading"></a></h2>
<p>Success: 0</p>
<p>Error: -1</p>
</section>
<section id="fota-deinit">
<h2>fota_deinit<a class="headerlink" href="#fota-deinit" title="Permalink to this heading"></a></h2>
</section>
<section id="overview-3">
<span id="id8"></span><h2>Overview<a class="headerlink" href="#overview-3" title="Permalink to this heading"></a></h2>
<p>This API will release all the resources allocated during fota_init() and
other FOTA API calls.</p>
</section>
<section id="definition-3">
<span id="id9"></span><h2>Definition<a class="headerlink" href="#definition-3" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>void fota_deinit(fota_handle_t * f_handle)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="parameters-2">
<span id="id10"></span><h2>Parameters<a class="headerlink" href="#parameters-2" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Pa
rameter</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ul class="simple">
<li></li>
</ul>
<p>f_handle*</p>
</td>
<td><p>Pointer to FOTA handle that was returned by fota_init()</p></td>
</tr>
</tbody>
</table>
</section>
<section id="return-3">
<span id="id11"></span><h2>Return<a class="headerlink" href="#return-3" title="Permalink to this heading"></a></h2>
<p>None.</p>
</section>
<section id="application-example">
<h2>Application Example<a class="headerlink" href="#application-example" title="Permalink to this heading"></a></h2>
<p>For the example code, refer: <em>apps/fota application</em>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="alarm_apiref.html" class="btn btn-neutral float-left" title="Alarm Api ref" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="httpclient_apiref.html" class="btn btn-neutral float-right" title="http client" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 InnoPhase IoT, Inc. | All Rights Reserved | Proprietary &amp; Confidential.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>