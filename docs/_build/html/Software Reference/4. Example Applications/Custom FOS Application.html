<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom FOS Application &mdash; InnoPhase 1.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js "></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="../../_static/js/custom.js" defer></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            InnoPhase
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Getting%20Started/Getting%20Started%20-%20Landing%20Page.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware%20Reference/Hardware-Reference.html">Hardware-Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Porting%20Guide/Porting-Guide.html">Porting-Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Disclaimers/Disclaimers.html">Disclaimer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Appendix/Appendix-Landing_Page.html">Appendix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Support/Support.html">Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Applications/Applications%20-%20Landing%20Page.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Regulatory%20Notices/Regulatory%20Notices.html">FCC/ISED Regulatory Notices</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Security/Security%20-%20Landing%20Page.html">Security</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">InnoPhase</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Custom FOS Application</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Software Reference/4. Example Applications/Custom FOS Application.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="custom-fos-application">
<h1>Custom FOS Application<a class="headerlink" href="#custom-fos-application" title="Link to this heading"></a></h1>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>Custom FOS application (custom_fos) demonstrates Firmware Upgrade Over
Serial. Using this application, Talaria TWO ELF can be upgraded from the
Host. Host provides Talaria TWO ELF to be upgraded. The ELF is sent over
serial using FOS commands.</p>
</section>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>GTKTerm or similar application.</p></li>
</ol>
</section>
<section id="command-description">
<h2>Command Description<a class="headerlink" href="#command-description" title="Link to this heading"></a></h2>
<p>Send ELF image to Talaria TWO.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>#./custom_fos &lt;elf_path&gt; &lt;hash&gt; &lt;auto_reset&gt;</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>where,</p>
<ol class="arabic simple">
<li><p>elf_path (must): Path of the Dual-Stack ELF</p></li>
<li><p>Hash (optional): sha256 hash of the ELF provided through elf_path.
Use –no_hash to skip this argument</p></li>
<li><p>auto_reset (optional):</p>
<ol class="loweralpha simple">
<li><p>1 – Talaria TWO is reset automatically after successful upgrade</p></li>
<li><p>0 - Host needs to reset Talaria TWO after successful upgrade</p></li>
</ol>
</li>
</ol>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Link to this heading"></a></h2>
<p>Execute the following operations on Talaria TWO:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>#./custom_fos /root/t2_firmware.elf –no_hash 1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
<section id="expected-output">
<h2>Expected Output<a class="headerlink" href="#expected-output" title="Link to this heading"></a></h2>
<section id="host-console-logs">
<h3>Host Console Logs<a class="headerlink" href="#host-console-logs" title="Link to this heading"></a></h3>
<p><a class="reference internal" href="../../_images/image190.png"><img alt="image1" src="../../_images/image190.png" style="width: 1.45312in; height: 0.17007in;" /></a><a class="reference internal" href="../../_images/image249.png"><img alt="A computer screen with white text Description automatically generated" src="../../_images/image249.png" style="width: 7.48031in; height: 2.6008in;" /></a></p>
<p>Figure 6: custom_fos - host console logs</p>
<p>Host serial log – text output:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>[root&#64;:]# ./custom_fos dual_stack.elf.strip
fa57d8378e1a88c92ad5d691eb1108a66f434c4171db0779bf671bdfc403e7cc 1</p>
<p>Args:</p>
<p>t2 elf path = dual_stack.elf.strip</p>
<p>hash =
fa57d8378e1a88c92ad5d691eb1108a66f434c4171db0779bf671bdfc403e7cc</p>
<p>autoreset = 1</p>
<p>file size = 650988</p>
<p>Fos Start: Resp status=0 : success</p>
<p>file size = 650988</p>
<p>End of Reading t2 image file</p>
<p>FOS Success</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="list-of-message-ids-used">
<h2>List of Message IDs Used<a class="headerlink" href="#list-of-message-ids-used" title="Link to this heading"></a></h2>
<p>This application demonstrates the use of custom Wi-Fi connection in
Dual-Stack custom applications and uses Group number 70. Following are
the message IDs used:</p>
<ol class="arabic simple">
<li><p>FOS_HIO_START_REQ</p></li>
</ol>
<p>This message is sent to Talaria TWO by Host with the ELF image name,
sha256 hash of the ELF, image size and a flag to indicate auto-reset of
Talaria TWO after firmware upgrade completes. Talaria TWO replies with
status code to Host.</p>
<ol class="arabic simple" start="2">
<li><p>FOS_HIO_IMG_SEND_REQ</p></li>
</ol>
<p>When Talaria TWO replies with a successful response for FOS start
request, Host will do the base64 encoding for ELF image and starts
sending it to Talaria TWO. If Talaria TWO successfully receives the ELF
data of size mentioned in the start request, it will send the status to
Host. As the size is set during FOS start request, Talaria TWO upgrades
the image and resets by itself it the auto reset flag is set.</p>
<ol class="arabic simple" start="3">
<li><p>FOS_HIO_COMMIT_REQ</p></li>
</ol>
<p>There is no necessity to call commit(), commit will be done implicitly
as the image size is set during fos_start.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 InnoPhase IoT, Inc. | All Rights Reserved | Proprietary &amp; Confidential.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>